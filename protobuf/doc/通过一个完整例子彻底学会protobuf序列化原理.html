<!DOCTYPE html>
<!-- saved from url=(0051)https://cloud.tencent.com/developer/article/1520442 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>通过一个完整例子彻底学会protobuf序列化原理 - 腾讯云开发者社区-腾讯云</title><meta name="keywords" content="go,rpc"><meta name="subject" content="通用技术-编程语言-go,通用技术-开发技术-rpc"><meta name="subject-time" content="2019-10-14 11:10:05"><meta name="description" content="Protobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很多，节..."><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover"><meta name="format-detection" content="telephone=no"><link rel="canonical" href="https://cloud.tencent.com/developer/article/1520442"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/global-20209142343.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/base-202302221706.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/Result-202211241518.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/AskDialog-202204021635.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/AskDialog-202204021635.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/base-202304201645.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/base-202302221706.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/Column-202304171610.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/Packs-202210112017.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/markdown-201810241044.css"><link rel="stylesheet" href="./通过一个完整例子彻底学会protobuf序列化原理_files/draft-master-v1.4.82.d4s2ddo9sb.css"><style media="screen">@supports (padding:max(0px)){.set-safe-area .com-main{bottom:calc(max(12px,constant(safe-area-inset-bottom)) + 50px);bottom:calc(max(12px,env(safe-area-inset-bottom)) + 50px)}.set-safe-area .com-main-simple-sec,.set-safe-area .com-main.without-tab-ft,.set-safe-area .com-main.without-ft{bottom:max(12px,constant(safe-area-inset-bottom));bottom:max(12px,env(safe-area-inset-bottom))}.set-safe-area .com-main-sec{bottom:max(12px,constant(safe-area-inset-bottom));bottom:max(12px,env(safe-area-inset-bottom))}.set-safe-area .com-m-footer,.set-safe-area .sa-fixed-btns{bottom:max(12px,constant(safe-area-inset-bottom));bottom:max(12px,env(safe-area-inset-bottom))}.set-safe-area .com-mobile-body{bottom:max(12px,constant(safe-area-inset-bottom));bottom:max(12px,env(safe-area-inset-bottom))}}@supports (padding:max(0px)){.set-safe-area .support-wrap,.set-safe-area div.body{bottom:max(12px,constant(safe-area-inset-bottom));bottom:max(12px,env(safe-area-inset-bottom))}.set-safe-area .com-responsive-no-ft div.body{bottom:max(12px,constant(safe-area-inset-bottom));bottom:max(12px,env(safe-area-inset-bottom))}}.doc-con .J-docShareModal{display: none;} .doc-con .J-docShareCopyTipModalMB{display: none} .with-focus+.com-main-simple-sec, .with-focus+.com-main,.with-focus+.com-body,.with-focus+.qa-body{top:100px} .qa-detail-ask-panel:after{display:none!important;} .sa-fixed-btns .c-btn-weak{background-color: #fff;}</style><style id="menu">.pg-2-article .com-nav-bar::-webkit-scrollbar {
              display: none; /* Chrome Safari */
            }
            .pg-2-article .com-nav-bar {
              scrollbar-width: none; /* firefox */
              -ms-overflow-style: none; /* IE 10+ */
              overflow-y: auto;
            }</style><script async="" src="./通过一个完整例子彻底学会protobuf序列化原理_files/gtm.js"></script><script async="" src="./通过一个完整例子彻底学会protobuf序列化原理_files/analytics.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/aegis.min.js"></script><script id="aegis">
					
					if (Aegis) {
						var aegis = new Aegis({
							id: 'dWlmyFvjDnalkbZO8q',
							env: 'production',
							onError: true,
							pagePerformance: true,
							reportAssetSpeed: true,
							api: {
								reportRequest: true,
								resHeaders: ['x-req-id'],
							},
							reportApiSpeed: {
								urlHandler(url, payload) {
									// 处理action
									if(payload) {
										var data = {};
										try{
											data = JSON.parse(payload);
										}catch(err){}
										if(data.action ) {
											var urls = url.split('?');
											return urls[0]+'/'+ data.action;
										}
									}
									return url;
								}
							},
							beforeRequest: function (data) {
								// load js failed
								if (data.logType === 'log') {
									if (data.logs.level === '32' && data.logs.msg.indexOf('google') > -1) return false;
								}
								var ignoreKeys = ['Script error', 'chrome-extension', 'qq.com', 'queryWeappQrcodeStatus', 'login/ajax/info', 'woa.com', 'trafficCollect.php', 'google', 'dscache', 'act-api', 'set_qc_cookie', 'opc.cloud.tencent.com', 'uc_gre_ad_buss', 'eb.xcj.pub', 'UCShellJava','/developer/labs/quick/loader','edgeImmersiveReaderDOM'];
								var alarmMsg = [data.logs.url, data.logs.msg].join('|');
								for (var i=0; i<ignoreKeys.length; i++) {
									if (alarmMsg.indexOf(ignoreKeys[i]) != -1) return false;
								}

								if (/bot|wechatdevtools|spider/i.test(navigator.userAgent)) {
									return false;
								}
							},
						});
					}
					</script><style id="dynamic-inserted-css-ask-pop-menu">
	.ask-pop-menu .com-correction-bubble {
		box-shadow: none;
		border: none;
		position: inherit;
    padding: 0;
	}
	.ask-pop-menu .com-correction-bubble::before {
		border:none;
	}
	</style><style id="dynamic-inserted-css-view-image">
.zoom-mask {
	position:fixed;
	left:0;
	right:0;
	bottom:0;
	top:0;
	background-color:rgba(0,0,0,.8);
	z-index:100;
  overflow:auto;
}
.zoom-close{
	position:fixed;
	right:12px;
	top:12px;
	cursor:pointer;
  width: 25px;
  height: 25px;
  font-size:0;
  background-image: url('https://cloudcache.tencent-cloud.cn/qcloud/ui/community-pc/build/base/images/dialog-close_fb6.svg');
  background-size: 100% auto;
}
.zoom-close:hover {
	background-image:url('https://cloudcache.tencent-cloud.cn/qcloud/ui/community-pc/build/base/images/dialog-close-blue_2e8.svg');
}
.zoom-wrap {
	overflow:auto;
	position:absolute;
	left:50%;
	top:50%;
	-webkit-transform:translate(-50%,-50%);
	transform:translate(-50%,-50%);
	text-align:center
}
.zoom-wrap>img {
	display:inline
}
.zoom-wrap .zoom-in {
	cursor:zoom-in
}
.zoom-wrap .zoom-out {
	cursor:zoom-out
}
.zoom-wrap::-webkit-scrollbar-thumb {
	background-color:#fff;
	border-radius:6px
}
.zoom-wrap::-webkit-scrollbar {
	width:5px;
	height:12px;
	background-color:#666
}
.zoom-wrap::-webkit-scrollbar-track {
	background-color:#666
}
@media only screen and (max-width:768px) {
	.zoom-wrap {
    width:96%;
    height:auto;
    background-color:transparent
  }
  .zoom-wrap .zoom-in {
    width:100%
  }
}
</style><style id="dynamic-inserted-css-avatar-upload-loading">
.com-user-avatar .uploading {
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	position: absolute;
	opacity: 0;
	background-size: cover;
	background-position: center;
	border-radius: 100%;
	transition: opacity 2s ease;
}
.com-user-avatar .uploading.spin {
	top: -2px;
	left: -2px;
	border: 2px solid #056ce5;
	border-left-color: transparent;
	animation: upload-rotate 4s linear infinite;
}
.com-user-avatar .uploading.active {
	transition: opacity 0.6s ease;
	opacity: 1;
}
.com-user-avatar .uploading.active.holder {
	opacity: 0.6;
}
@keyframes upload-rotate {
	from { transform: rotateZ(0) }
	to { transform: rotateZ(360deg) }
}
</style><style id="dynamic-inserted-css-transition-slide391298858">
.transition-slide391298858-enter {
	opacity: 0 !important;
	transform: translate3d(0px, -44px, 0);
}
.transition-slide391298858-enter-active {
	opacity: 1 !important;
	transform: translate3d(0, 0, 0);
	transition: opacity 300ms ease, transform 300ms ease;
}
.transition-slide391298858-leave {
	opacity: 1 !important;
	transform: translate3d(0, 0, 0);
}
.transition-slide391298858-leave-active {
	opacity: 0 !important;
	transform: translate3d(0px, -44px, 0);
	transition: opacity 300ms ease, transform 300ms ease;
}
</style><style id="dynamic-inserted-css-transition-fade-312660078">
.transition-fade-312660078-enter {
	opacity: 0 !important;
}
.transition-fade-312660078-enter-active {
	opacity: 0.7 !important;
	transition: opacity 300ms ease;
}
.transition-fade-312660078-leave {
	opacity: 0.7 !important;
}
.transition-fade-312660078-leave-active {
	opacity: 0 !important;
	transition: opacity 300.0001ms ease;
}
</style><style id="dynamic-inserted-css-transition-slide-1496561436">
.transition-slide-1496561436-enter {
	opacity: 0 !important;
	transform: translate3d(0px, -30px, 0);
}
.transition-slide-1496561436-enter-active {
	opacity: 1 !important;
	transform: translate3d(0, 0, 0);
	transition: opacity 300ms ease, transform 300ms ease;
}
.transition-slide-1496561436-leave {
	opacity: 1 !important;
	transform: translate3d(0, 0, 0);
}
.transition-slide-1496561436-leave-active {
	opacity: 0 !important;
	transform: translate3d(0px, -30px, 0);
	transition: opacity 300ms ease, transform 300ms ease;
}
</style><style id="dynamic-inserted-css-article-sharing!.extra-cnt">.extra-cnt .com-share-options .qr-img img {
					width: 130px;
					height: 130px;
				}</style><script type="text/javascript" async="" src="./通过一个完整例子彻底学会protobuf序列化原理_files/MathJax.js"></script><style id="dynamic-inserted-css-transition-slide-1218967474">
.transition-slide-1218967474-enter {
	opacity: 0 !important;
	transform: translate3d(20px, 0px, 0);
}
.transition-slide-1218967474-enter-active {
	opacity: 1 !important;
	transform: translate3d(0, 0, 0);
	transition: opacity 300ms ease, transform 300ms ease;
}
.transition-slide-1218967474-leave {
	opacity: 1 !important;
	transform: translate3d(0, 0, 0);
}
.transition-slide-1218967474-leave-active {
	opacity: 0 !important;
	transform: translate3d(20px, 0px, 0);
	transition: opacity 300ms ease, transform 300ms ease;
}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><meta http-equiv="origin-trial" content="A727AcAeLCei/ZogJHBlJUS63SxP6AeIROo7qXrkjrxkoxBu0eSSmypAHmGYwk4HjBMQp5nxCFODzfVnUIe31AQAAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjg4MDgzMTk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><script type="text/javascript" async="" src="./通过一个完整例子彻底学会protobuf序列化原理_files/f.txt"></script><script type="text/javascript" async="" src="./通过一个完整例子彻底学会protobuf序列化原理_files/f(1).txt"></script></head><body class="bg-color" style="position:initial"><div id="MathJax_Message" style="display: none;"></div><div id="react-root"><div class="col-2-article-page"><div class="cdc-header cdc-header--block"><div class="cdc-header__top"><a href="https://cloud.tencent.com/?from=20060&amp;from_column=20060" class="cdc-header__top-logo"><i>腾讯云</i></a><div class="cdc-header__top-operates"><a href="https://cloud.tencent.com/product/ba?from=20062&amp;from_column=20062" class="cdc-header__link">备案</a><a href="https://console.cloud.tencent.com/?from=20063&amp;from_column=20063" class="cdc-header__link">控制台</a></div></div><div class="cdc-header__bottom"><a href="https://cloud.tencent.com/developer" class="cdc-header__bottom-logo"><i>开发者社区</i></a><div class="cdc-header__bottom-nav"><div class="cdc-header__nav-list"><div class="cdc-header__nav-item">学习</div><div class="cdc-header__nav-item">实践</div><div class="cdc-header__nav-item">活动</div><div class="cdc-header__nav-item">专区</div><div class="cdc-header__nav-item">工具</div></div><a href="https://cloud.tencent.com/tvp?from=20154&amp;from_column=20154" class="cdc-header__tvp">TVP</a><a href="https://cloud.tencent.com/act/pro/seckill_season?from=20190&amp;from_column=20190" target="_blank" class="cdc-header__capsule"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/7dafl36p6h.png" alt="广告"></a></div><div class="cdc-header__bottom-operates"><div class="cdc-header__search"><div class="cdc-search__wrap"><div class="cdc-search"><span class="cdc-search__text">文章/答案/技术大牛</span><button class="cdc-search__btn">搜索<i class="cdc-search__i search"></i></button></div><div class="cdc-search__dropdown"><div class="cdc-search__bar"><input type="text" class="cdc-search__bar-input" placeholder="文章/答案/技术大牛" value=""><div class="cdc-search__bar-btns"><button class="cdc-search__btn">搜索<i class="cdc-search__i search"></i></button><button class="cdc-search__btn">关闭<i class="cdc-search__i clear"></i></button></div></div></div></div></div><div class="cdc-header__create"><span class="cdc-header__create-btn">写文章</span></div><div class="cdc-header__ask"><button class="cdc-btn size-s cdc-header__ask-btn cdc-btn--hole">提问</button></div><div class="cdc-header__account"><div class="cdc-header__account-inner"><button class="cdc-btn cdc-header__account-btn cdc-btn--primary">登录/注册</button></div></div></div></div></div><div class="com-sticky-header col-2-sticky-header" style="left: 0px;"><div class="com-inner"><div class="com-sticky-header-main"><div class="com-media author-media"><div class="com-media-object"><a href="https://cloud.tencent.com/developer/user/1300884" class="author-media-avatar" style="background-image:url(https://ask.qcloudimg.com/avatar/1300884/dlk1i79vwc.png?imageView2/2/w/80/h/7000)"></a></div><div class="com-media-body"><h3 class="author-media-name" title="horstxu"><a href="https://cloud.tencent.com/developer/user/1300884" class="author-media-name-inner">horstxu</a><div class="c-bubble-trigger com-verification"><i class="verified"></i><div class="c-bubble c-bubble-top"><div class="c-bubble-inner" style="padding:8px 10px"><p>腾讯 · 软件工程师 (已认证)</p></div></div></div><ul class="com-emblem-list"><li class="c-bubble-trigger com-emblem"><a href="https://cloud.tencent.com/developer/original-sharing" target="_blank" hotrep="undefined.0"><i class="com-emblem-icon medal-silver"></i></a><div class="c-bubble c-bubble-top"><div class="c-bubble-inner" style="padding:8px 10px"><p>《技思广益 · 腾讯技术人原创集》资深作者</p></div></div></li></ul></h3><a href="https://cloud.tencent.com/developer/column/4656" class="com-arrow-link author-media-link gray">9<!-- --> 篇文章</a></div></div><span class="header-split"></span><h3 class="header-title" title="通过一个完整例子彻底学会protobuf序列化原理">通过一个完整例子彻底学会protobuf序列化原理</h3></div><div class="com-sticky-header-extra"><button type="button" class="l c-btn"><span class="text">转到我的清单</span></button></div></div></div><div class="J-body col-body pg-2-article"><div class="com-crumb theme2 no-pd"><div class="com-inner"><a href="https://cloud.tencent.com/developer/column" class="crumb-item" hotrep="community.column.article2.crumb.0">专栏首页</a><span class="crumb-split"></span><a href="https://cloud.tencent.com/developer/column/4656" class="crumb-item" hotrep="community.column.article2.crumb.2" title="horstxu的博客">horstxu的博客</a><span class="crumb-split"></span><span class="crumb-item current" title="通过一个完整例子彻底学会protobuf序列化原理">通过一个完整例子彻底学会protobuf序列化原理</span></div></div><div class="com-3-layout"><div class="layout-main"><div class="com-widget-operations2 theme2 J-sharingBar" style=""><div class="main-cnt"><a href="javascript:;" class="com-opt-link link-add is-actived"><i class="com-i-add"></i></a><a href="javascript:;" class="com-opt-link link-like"><i class="com-i-like"></i><span class="text">12</span></a><a href="javascript:;" class="com-opt-link link-bookmark"><i class="com-i-bookmark"></i><span class="text">0</span></a><div><a href="javascript:;" class="com-opt-link link-share"><i class="com-i-share"></i></a><div class="extra-cnt" style="visibility:hidden"><span class="com-opt-text share-text">分享</span><ul class="com-share-options"><li><div class="c-bubble-trigger"><a href="javascript:;" class="opt-item"><i class="opt-icon wechat"></i></a><div class="c-bubble c-bubble-right "><div class="c-bubble-inner"><div class="qr-img" title="https://cloud.tencent.com/developer/article/1520442?shareByChannel=wechat"><canvas width="130" height="130" style="display: none;"></canvas><img alt="Scan me!" style="display: block;" src="data:image/png;base64,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"></div><p class="qr-txt">分享文章到朋友圈</p></div></div></div></li><li><div class="c-bubble-trigger"><a href="javascript:;" class="opt-item"><i class="opt-icon qq"></i></a><div class="c-bubble c-bubble-right "><div class="c-bubble-inner"><span>分享文章到 QQ</span></div></div></div></li><li><div class="c-bubble-trigger"><a href="javascript:;" class="opt-item"><i class="opt-icon weibo"></i></a><div class="c-bubble c-bubble-right "><div class="c-bubble-inner"><span>分享文章到微博</span></div></div></div></li><li><div class="c-bubble-trigger"><a class="opt-item" href="javascript:;"><i class="opt-icon copy"></i></a><div class="c-bubble c-bubble-right "><div class="c-bubble-inner"><span>复制文章链接到剪贴板</span></div></div></div></li></ul><div class="c-bubble-trigger com-widget-poster"><button class="scan-btn">海报分享</button><div class="c-bubble c-bubble-right "><div class="c-bubble-inner"><div class="qr-img" title="https://cloud.tencent.com/developer/article-sharing/1520442"><canvas width="130" height="130" style="display: none;"></canvas><img alt="Scan me!" src="data:image/png;base64,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" style="display: block;"></div><p class="qr-txt">海报分享</p></div></div></div></div></div></div></div><section class="com-2-panel col-2-article J-articlePanel"><span class="com-2-mark-triangle article-mark"><span class="mark-cnt">原创</span></span><div class="col-2-article-header"><h1 class="article-title J-articleTitle"><span>通过一个完整例子彻底学会protobuf序列化原理</span></h1><div class="article-infos-wrap"><div class="article-infos"><span class="article-info">发布于2019-10-14 11:10:05</span><span class="article-info">阅读 <!-- -->9.5K</span>0</div><div class="article-infos-extra"></div></div></div><div class="com-markdown-collpase"><div class="com-markdown-collpase-main"><div><div class="rno-markdown J-articleContent rno-"><h1 id="%E8%83%8C%E6%99%AF" name="%E8%83%8C%E6%99%AF">背景</h1><p>Protobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很多，节约流量。对于pb协议的具体使用方法，其官网有比较详细的说明，本文不再详述。我们的数据不管在代码中是什么复杂结构体，传输时都要序列化成二进制串。官网中也介绍了Protobuf的序列化算法，不过给的例子比较简单，学习起来不够直观。因此，本文用一个较为完整的例子直观展示一下Protobuf的序列化，一个例子即可搞懂Protobuf的序列化算法。</p><h1 id="%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84Protobuf%E4%B8%BE%E4%BE%8B" name="%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84Protobuf%E4%B8%BE%E4%BE%8B">一个完整的Protobuf举例</h1><figure class=""><div class="image-block"><span><div class="" style="text-align: center; position: relative;"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/2q0w6ewaij.png" style="box-shadow: none; width: 1508px; display: inline-block;"></div></span><figcaption>一个完整的protobuf例子，包含全部pb支持的数据类型</figcaption></div></figure><p>这个例子有一个特点，就是<code>AllDataType</code>这一结构体中包含了Protobuf所支持的全部数据类型。下一步，使用protoc编译该proto文件，并在程序中声明一个<code>AllDataType</code>类型的数据，将其序列化，并打印出来。下面的代码是以golang为例：</p><div class="developer-code-block"><pre class="prism-token token line-numbers language-go" tabindex="0"><code class="language-go" style="margin-left:0"><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"&lt;path-to&gt;/example"</span>
    <span class="token string">"github.com/golang/protobuf/proto"</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    test <span class="token operator">:=</span> example<span class="token punctuation">.</span>AllDataType<span class="token punctuation">{</span>
        Fint32<span class="token punctuation">:</span>      <span class="token number">257</span><span class="token punctuation">,</span>
        Fint64<span class="token punctuation">:</span>      <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>
        Fuint32<span class="token punctuation">:</span>     <span class="token number">1</span><span class="token punctuation">,</span>
        Fuint64<span class="token punctuation">:</span>     <span class="token number">1025</span><span class="token punctuation">,</span>
        Fsint32<span class="token punctuation">:</span>     <span class="token number">0</span><span class="token punctuation">,</span>
        Fsint64<span class="token punctuation">:</span>     <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>
        Ffixed32<span class="token punctuation">:</span>    <span class="token number">17</span><span class="token punctuation">,</span>
        Ffixed64<span class="token punctuation">:</span>    <span class="token number">2049</span><span class="token punctuation">,</span>
        Fdouble<span class="token punctuation">:</span>     <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span>
        Ffloat<span class="token punctuation">:</span>      <span class="token number">0.6</span><span class="token punctuation">,</span>
        Fbool<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
        Fenum<span class="token punctuation">:</span>       example<span class="token punctuation">.</span>DayOfWeek_SUNDAY<span class="token punctuation">,</span>
        Fmessage<span class="token punctuation">:</span>    <span class="token operator">&amp;</span>example<span class="token punctuation">.</span>Child<span class="token punctuation">{</span>Fsint64<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        Fmap<span class="token punctuation">:</span>        <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">uint32</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">2.12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        Frepeatbool<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        Fstring<span class="token punctuation">:</span>     <span class="token string">"Hello World"</span><span class="token punctuation">,</span>
        Fbytes<span class="token punctuation">:</span>      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token number">129</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        Fsfixed32<span class="token punctuation">:</span>   <span class="token number">12345</span><span class="token punctuation">,</span>
        Fsfixed64<span class="token punctuation">:</span>   <span class="token number">54321</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    data<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> proto<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>test<span class="token punctuation">)</span> <span class="token comment">// protobuf将结构体序列化为二进制串</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// 打印AllDataType类型的数据序列化后的二进制串</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button class="copy">复制</button></div><p>最后一行打印的结果为：</p><figure class=""><div class="image-block"><span><div class="" style="text-align: center; position: relative;"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/7mo37ygdiy.png" style="box-shadow: none; width: 641px; display: inline-block;"></div></span><figcaption>测试程序的输出结果</figcaption></div></figure><h1 id="%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90" name="%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90">序列化结果分析</h1><p>接下来就是最关键的一幅图，我们逐个字节地来分析一下上面的打印结果中，每个字节所代表的含义（可查看大图）：</p><figure class=""><div class="image-block"><span><div class="" style="text-align: center; position: relative;"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/ga79ehlx76.png" style="box-shadow: none; width: 1272px; display: inline-block;"></div></span><figcaption>逐字节解释序列化结果的含义</figcaption></div></figure><p>【1】图中橙色部分（如第1行第1列，第1行第4列）用于表示字段field number（简写为fn）以及wire type（简写为wt）。其中field number是proto文件中标注的该字段数字代号，而wire type表示本字段的数据类型属于哪种归类，这些归类<strong>主要用于提醒反序列化程序如何判断本字段值占据几个字节</strong>。Wire type值与数据类型的映射关系为：</p><div class="table-wrapper"><table><thead><tr><th style="text-align:left"><div><div class="table-header"><p>Wire Type</p></div></div></th><th style="text-align:left"><div><div class="table-header"><p>解释</p></div></div></th><th style="text-align:left"><div><div class="table-header"><p>数据类型</p></div></div></th></tr></thead><tbody><tr><td style="text-align:left"><div><div class="table-cell"><p>0</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>varint变长整型（见下文）</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>int32, int64, uint32, uint64, sint32, sint64, bool, enum</p></div></div></td></tr><tr><td style="text-align:left"><div><div class="table-cell"><p>1</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>固定8字节</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>fixed64, sfixed64, double</p></div></div></td></tr><tr><td style="text-align:left"><div><div class="table-cell"><p>2</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>需显式告知长度（见下文）</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>string, bytes, 嵌套类型（embedded messages），repeated字段</p></div></div></td></tr><tr><td style="text-align:left"><div><div class="table-cell"><p>3</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>（已废弃）</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>（已废弃）</p></div></div></td></tr><tr><td style="text-align:left"><div><div class="table-cell"><p>4</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>（已废弃）</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>（已废弃）</p></div></div></td></tr><tr><td style="text-align:left"><div><div class="table-cell"><p>5</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>固定4字节</p></div></div></td><td style="text-align:left"><div><div class="table-cell"><p>fixed32, sfixed32, float</p></div></div></td></tr></tbody></table></div><p>因为wire type种类很少，为了进一步节约字节，write type只用了3个bits来表示，而fn则使用更高位来表示：</p><figure class=""><div class="image-block"><span><div class="" style="text-align: center; position: relative;"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/gofqmrws8t.png" style="box-shadow: none; width: 356px; display: inline-block;"></div></span></div></figure><p>【2】参考【1】中的表格，大部分整数类型的wire type都是varint变长整型。<strong>Varint简单说就是每个字节最高位不用来表示具体数值，只用来表示“本字节是不是这个数字的最后一个字节”</strong>。0表示最后一个字节，1表示不是最后一字节、后面还有。因此如果要把varint还原为普通的二进制表示，需要去掉最高bit，把剩下的7个bit组合起来看。一图胜千言：</p><figure class=""><div class="image-block"><span><div class="" style="text-align: center; position: relative;"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/8xmlb5is9v.png" style="box-shadow: none; width: 271px; display: inline-block;"></div></span></div></figure><p>需要注意protobuf的varint采用类似<strong>小端模式</strong>，因此图中第1行第3列存的是高位，第2列是低位，转化十进制过程中需要把他们调换一下位置，其他使用varint的类型也是类似机制。</p><p>【3】注意从第1行第5列到第2行第1列，所存储的数字是int64类型的-2，占据10个字节，这甚至比不使用varint所占的空间还要大。主要原因是负数在计算机中采用补码存储，int类型-2本来存储上就等同于一个特别大的unsigned int，需要用很多字节去存储，而varint还把每字节8bits最高位用来干别的事情，不用来表示数值了，导致每个字节都少了一个可用的bit位。这里也可以看出只使用varint的弊端，对于int类型的负数（或unsigned int类型的特别大正数），完全没有起到节约字节数的效果。因此protobuf中出现了sint32和sint64类型，该类型使用ZigZag来优化。<strong>ZigZag规则为，如果是负数，则存储其绝对值的2倍减1；如果为非负数，则存储其绝对值的2倍</strong>。这样就可以把int类型1对1映射为unsigned int类型。这一规则对应图中的第2行第8列，数字-2其实二进制存储的是正整数3（[zz]表示ZigZag）。</p><p>ZigZag的优化主要基于一个事实：<strong>我们在传输数据时，所传的整数大多是和0比较接近的小正数或者小负数，很少传输绝对值特别大的负数或正数</strong>。满足这一事实的场景下，推荐把protobuf中的int32和int64都替换为sint32和sint64，节约字节数。</p><p>【4】Varint和ZigZag方法其实没有优化绝对值特别大的数。例如如果要传输的数字是int32最大值2147483647，本来是4个字节，使用varint反而需要5个字节了。因此，fixed32和fixed64类型就是为这种场景设计。<strong>这种情况下，数字直接按照它的二进制表示进行序列化，固定占用4字节或8字节</strong>，例如图中的第3行第2列到第9列，表示的是2049。由于2049是一个比较小的整数，因此会有很多0来填充空余字节，比较浪费。</p><p>【5】Protobuf表示浮点数的类型是double（8字节）和float（4字节）。浮点数也是直接按照它的二进制表示进行序列化。例如第4行第7列至第10列，4字节浮点数0.6被序列化为 [154 153 25 63] （小端模式ASCII码），这正是0.6在内存中的存储方式。至于怎么算出来的，不再详细展开，可以参考<a href="https://cloud.tencent.com/developer/article/1473541" target="_blank">链接</a>。</p><p>【6】Protobuf序列化时会直接忽略为空值的字段，例如fn=5的字段根本没有在图中出现，主要原因是fn=5的字段Fsint值为0，属于空值（默认值）。直接忽略可进一步节约字节数。</p><p>【7】图中的浅紫色字段表示的是字段长度，它专属于wire type=2的字段。当wire type=2时，protobuf并不知道对应的值到底占据几个字节，需要在fn和wt后面紧跟一个长度数字。需要注意的是字段长度数值也属于varint表示的无符号整型。</p><p>【8】对于在proto文件中用repeat修饰的字段，值部分会连续出现多次，如第7行第6列到第10列。一般repeat字段都被当成数组。</p><p>【9】注意第8行第12列和第13列，当fn大于15时，一个字节已经不足以序列化fn+wt部分了，这时fn+wt会被当成一个数字，按照varint的形式来序列化。</p><figure class=""><div class="image-block"><span><div class="" style="text-align: center; position: relative;"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/fk5byb1ild.png" style="box-shadow: none; width: 391px; display: inline-block;"></div></span><figcaption>field number大于16时，必须使用多个字节表示</figcaption></div></figure><p>因为fn大于15的字段需要至少2个字节来存储fn+wt，protobuf建议，<strong>把fn小于16的值留给最常用字段，以节约字节数</strong>。</p><p>最后，总结一下在Protobuf协议定义时，怎样选取合适的整数类型：</p><p>（1）有符号整型，大多数值都不算很大（4字节绝对值小于2^27，8字节绝对值小于2^55），使用sint32和sint64</p><p>（2）有符号整型，大多数值都特别大（4字节绝对值大于2^27，8字节绝对值大于2^55），使用sfixed32，sfixed64</p><p>（3）无符号整型，大多数值都不算很大（4字节绝对值小于2^28，8字节绝对值小于2^56），使用uint32和uint64</p><p>（4）无符号整型，大多数值都特别大（4字节绝对值大于2^28，8字节绝对值大于2^56），使用fixed32和fixed64</p><p>（5）有符号整型，绝大多数数值都是不算很大的正数（4字节绝对值小于2^27，8字节绝对值小于2^55），但在极少数情况下可能出现负值，使用int32和int64。</p></div></div><div id="J-viewLargeImageBox" class="zoom-mask" style="display: none; width: 100%; height: 100%; z-index: 10001;"><div class="zoom-close"></div><div class="zoom-wrap"><img><div class="c-loading"><div class="c-loading-inner"><div class="one"></div><div class="two"></div><div class="three"></div></div></div></div></div><div class="col-2-article-source"><p>原创声明，本文系作者授权腾讯云开发者社区发表，未经许可，不得转载。</p><p>如有侵权，请联系 <!-- -->cloudcommunity@tencent.com<!-- --> 删除。</p></div></div><div class="com-markdown-collpase-toggle"><a href="javascript:;" class="toggle-link">展开阅读全文</a></div></div><div class="col-2-article-tags"><nav class="col-tags"><a href="https://cloud.tencent.com/developer/tag/10174?entry=article" class="col-tag">go</a><a href="https://cloud.tencent.com/developer/tag/10759?entry=article" class="col-tag">rpc</a></nav><div class="extra-part"><div class="com-operations"><a href="javascript:;" class="com-opt-link link-warn"><i class="com-i-warn"></i>举报</a></div></div></div><div class="col-2-article-opts"><button type="button" class="c-btn"><span class="text"><i class="opt-icon like"></i>点赞 12</span></button><button type="button" class="c-btn c-btn-weak"><span class="text"><i class="opt-icon share"></i>分享</span></button></div><section class="group-comments"><div class="com-comment-single-edit theme2"><div class="edit-body"><div class="edit-textarea"></div><div class="edit-tip"><a href="javascript:;">登录</a> 后参与评论</div></div></div><div class="col-2-article-filter"><div class="article-filter-main"><em>1</em> 条评论</div><div class="article-filter-extra"><ul class="com-tab-subctrl"><li class="actived"><a href="javascript:;">最新</a></li><li class=""><a href="javascript:;">高赞</a></li></ul></div></div><section class="com-comment-popup"><div class="popup-bd"><div><section class="com-comment-panel theme2"><div class="com-media com-media com-comment-panel-author"><a href="https://cloud.tencent.com/developer/user/7501024" rel="nofollow" class="com-media-object" target="_blank"><span class="com-media-img" style="background-image: url(&quot;https://ask.qcloudimg.com/avatar/7501024/kmaffx0jv9.png?imageView2/2/w/72/h/7000&quot;);"></span></a></div><div class="com-comment-panel-bd"><div class="com-comment-panel-header"><span class="com-comment-panel-names"><a href="https://cloud.tencent.com/developer/user/7501024" class="name" target="_blank">用户7501024</a></span><div class="com-comment-panel-header-extra"><time datetime="2021-09-27 00:12:52" title="2021-09-27 00:12:52" class="com-comment-panel-time"> 2021-09-27<span class="com-v-box">2021-09-27 00:12:52</span></time></div></div><div class="com-comment-panel-markdown"><p>好文章，胜读其它十多篇甚至更多关于protocol buf的文章~</p></div><div class="com-operations com-comment-panel-operations"><a href="javascript:;" class="com-opt-link link-like"><i class="com-i-like"></i>0</a><a href="javascript:;" class="com-opt-link link-comment"><i class="com-i-dialog"></i>回复</a><a href="javascript:;" class="com-opt-link link-hidden link-report"><i class="com-i-report"></i>举报</a></div></div></section></div></div></section></section></section><section class="com-2-panel"><header class="com-2-panel-hd"><h3 class="com-2-panel-title">相关文章</h3></header><ul class="com-3-article-panels without-padding-top"><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1004692?from=article.detail.1520442&amp;areaSource=106000.1&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">在 NodeJS 中玩转 Protocol Buffer</h3><p class="com-3-article-panel-desc">Protocol Buffers 是一种轻便高效的结构化数据存储格式，可以用于结构化数据序列化，很适合做数据存储或 RPC 数据交换格式。</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/650358" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-900000/749407afb30f24731c8249a0739a34ac.png?imageView2/2/w/64/h/7000)"></span></span>腾讯IVWEB团队</a></div></div></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1005849?from=article.detail.1520442&amp;areaSource=106000.2&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">protobuffer 编解码原理</h3><p class="com-3-article-panel-desc">protobuf 在 RPC、数据存储、配置化等方面都有很广泛的应用，究其原因在于其时间和空间上的高效、易扩展等特性，本文从原理上来揭示其高效的原因。</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/839405" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-839405/8f4fb9f1cce4405cc714ddd1be554c1d.jpg?imageView2/2/w/64/h/7000)"></span></span>serena</a></div></div></div><div class="com-3-article-panel-object"><span class="com-thumbnail com-3-article-panel-thumbnail" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-900000/c395708b7734a057731ceaa143c69d2e.png?imageView2/2/w/240/h/7000)"></span></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1010317?from=article.detail.1520442&amp;areaSource=106000.3&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">tensorflow：AToolDeveloperGuideToTFModelFIles</h3><p class="com-3-article-panel-desc">Tensorflow Model Files
最近闲来无聊，想深入理解一下tensorlfow，也不知从何下手，突然间发现了官方文档的Extend模块下还有这个...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/1125223" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/avatar/1125223/n9tfyvf0fy.png?imageView2/2/w/64/h/7000)"></span></span>ke1th</a></div></div></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1013588?from=article.detail.1520442&amp;areaSource=106000.4&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">移动互联网IM之协议设计</h3><p class="com-3-article-panel-desc">
 导语：如果想自己动手实现一个移动互联网IM app，要怎么做？第一个要解决的问题就是IM协议的设计。本文将讲述如何从0到1设计一个私有的tcp协议。
 
虽...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/1069763" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/avatar/1069763/eh528wcp5z.jpg?imageView2/2/w/64/h/7000)"></span></span>MelonTeam</a></div></div></div><div class="com-3-article-panel-object"><span class="com-thumbnail com-3-article-panel-thumbnail" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-1069763/3aumsd2o8p.png?imageView2/2/w/240/h/7000)"></span></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1015451?from=article.detail.1520442&amp;areaSource=106000.5&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">在NodeJS中玩转Protocol Buffer</h3><p class="com-3-article-panel-desc">  本文作者：IMWeb link 原文出处：IMWeb社区 未经同意，禁止转载 
 
 这篇文章的代码都是基于Protobuf.js 4.x的API写的，已经...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/1021320" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/avatar/1021320/vd3193otj0.png?imageView2/2/w/64/h/7000)"></span></span>IMWeb前端团队</a></div></div></div><div class="com-3-article-panel-object"><span class="com-thumbnail com-3-article-panel-thumbnail" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-1021320/axwiye6mcw.png?imageView2/2/w/240/h/7000)"></span></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1016504?from=article.detail.1520442&amp;areaSource=106000.6&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">protobuf 转换python代码时发生 Expected "required", "optional", or "repeated".错误解决方法</h3><p class="com-3-article-panel-desc">&nbsp; &nbsp; &nbsp; &nbsp; Google Protocol Buffers 简称 Protobuf，它提供了一种灵活、高效、自动序列化结构数据的机制，可以联想 XML，但是...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/1155928" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/avatar/male/HJQWnqaWruQ.png)"></span></span>sparkexpert</a></div></div></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1025001?from=article.detail.1520442&amp;areaSource=106000.7&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">WCF服务上应用protobuf</h3><p class="com-3-article-panel-desc">protobuf是google提供的一个开源序列化框架，类似于XML，JSON这样的数据表示语言，其最大的特点是基于二进制，因此比传统的XML表示高效短小得多。...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/410847" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-410847/fb31b97a3af694f513d249eba5a3ecd3.png?imageView2/2/w/64/h/7000)"></span></span>张善友</a></div></div></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1025004?from=article.detail.1520442&amp;areaSource=106000.8&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">Protocol Buffers的应用</h3><p class="com-3-article-panel-desc">1. Protocol Buffers的介绍
Protocol buffers are Google’s language-neutral, platform-...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/410847" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-410847/fb31b97a3af694f513d249eba5a3ecd3.png?imageView2/2/w/64/h/7000)"></span></span>张善友</a></div></div></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1025821?from=article.detail.1520442&amp;areaSource=106000.9&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">WCF RESTful服务的Google Protocol Buffers超媒体类型</h3><p class="com-3-article-panel-desc">Protocol Buffers 是在一个很理想的结构化数据的语言中立的序列化格式。你可以考虑一下XML或JSON，但更轻，更小的协议缓冲区。 这种格式的广应用...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/410847" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-410847/fb31b97a3af694f513d249eba5a3ecd3.png?imageView2/2/w/64/h/7000)"></span></span>张善友</a></div></div></div><div class="com-3-article-panel-object"><span class="com-thumbnail com-3-article-panel-thumbnail" style="background-image:url(https://ask.qcloudimg.com/http-save/yehe-410847/d65syetvt5.png?imageView2/2/w/240/h/7000)"></span></div></div></div></li><li class="panel-cell"><div class="com-3-article-panel theme2"><a href="https://cloud.tencent.com/developer/article/1030036?from=article.detail.1520442&amp;areaSource=106000.10&amp;traceId=FZ4RQwtbs7kkjuvmz92c-" target="_blank" class="panel-link" hotrep=""></a><div class="com-3-article-panel-media"><div class="com-3-article-panel-body"><h3 class="com-3-article-panel-title">大型web系统数据缓存设计</h3><p class="com-3-article-panel-desc">1.   前言
在高访问量的web系统中，缓存几乎是离不开的；但是一个适当、高效的缓存方案设计却并不容易；所以接下来将讨论一下应用系统缓存的设计方面应该注意哪些...</p><div class="com-3-article-panel-infos"><div class="com-3-article-panel-source"><a href="https://cloud.tencent.com/developer/user/1009891" target="_blank" class="item author"><span class="com-2-avatar"><span class="com-2-avatar-inner" style="background-image:url(https://ask.qcloudimg.com/raw/yehe-133f028/kcz4ys866s.png?imageView2/2/w/64/h/7000)"></span></span>腾讯大数据</a></div></div></div></div></div></li></ul><div class="com-list-enter"><a href="https://cloud.tencent.com/developer/column" class="com-arrow-link">更多文章</a></div></section></div><div class="layout-side"><section class="com-2-panel side J-authorPanel internal"><header class="com-2-panel-hd"><h3 class="com-2-panel-title">作者介绍</h3></header><div class="com-2-panel-bd"><div class="com-author-intro"><div class="com-author-intro-object"><a href="https://cloud.tencent.com/developer/user/1300884" class="com-author-intro-avatar" style="background-image:url(https://ask.qcloudimg.com/avatar/1300884/dlk1i79vwc.png?imageView2/2/w/160/h/7000)" target="_blank"></a></div><h3 class="com-author-intro-name"><a href="https://cloud.tencent.com/developer/user/1300884" class="com-author-intro-name-inner" title="horstxu" target="_blank">horstxu</a><ul class="com-emblem-list"><li class="c-bubble-trigger com-emblem"><a href="https://cloud.tencent.com/developer/original-sharing" target="_blank" hotrep="undefined.0"><i class="com-emblem-icon medal-silver"></i></a><div class="c-bubble c-bubble-bottom"><div class="c-bubble-inner" style="padding:8px 10px"><p>《技思广益 · 腾讯技术人原创集》资深作者</p></div></div></li></ul></h3><div class="com-author-intro-desc" title="腾讯软件工程师">腾讯软件工程师<div class="c-bubble-trigger com-verification"><i class="verified"></i><div class="c-bubble c-bubble-bottom"><div class="c-bubble-inner" style="padding:8px 10px"><p>腾讯 · 软件工程师 (已认证)</p></div></div></div></div><div class="com-author-intro-btns"><button type="button" class="c-btn c-btn" hotrep="community.column.article2.follow"><span class="text">关注</span></button><a href="https://cloud.tencent.com/developer/column/4656" target="_blank" class="c-btn c-btn-hole" hotrep="community.column.article2.column"><span class="text">专栏</span></a></div><ul class="com-author-intro-infos"><li class="com-author-intro-info"><a href="https://cloud.tencent.com/developer/user/1300884" target="_blank" class="com-author-intro-info-link"><div class="com-author-intro-info-title">文章</div><div class="com-author-intro-info-num">9</div></a></li><li class="com-author-intro-info"><a href="https://cloud.tencent.com/developer/user/1300884" target="_blank" class="com-author-intro-info-link"><div class="com-author-intro-info-title">阅读量</div><div class="com-author-intro-info-num">102.6K</div></a></li><li class="com-author-intro-info"><a href="https://cloud.tencent.com/developer/user/1300884" target="_blank" class="com-author-intro-info-link"><div class="com-author-intro-info-title">获赞</div><div class="com-author-intro-info-num">141</div></a></li><li class="com-author-intro-info"><a href="https://cloud.tencent.com/developer/rank" target="_blank" class="com-author-intro-info-link"><div class="com-author-intro-info-title">作者排名</div><div class="com-author-intro-info-num">6054</div></a></li></ul></div></div></section><section class="com-2-panel side J-specialTopicPanel"><header class="com-2-panel-hd"><h3 class="com-2-panel-title">精选专题</h3></header><div class="com-2-panel-bd"><ul class="com-2-side-topics without-margin"><li><a href="https://cloud.tencent.com/developer/special/TencentCloudNative" class="com-media com-side-topic" hotrep="community.column.article2.side_topic.0.link"><div class="com-media-object"><span class="com-thumbnail" style="background-image:url(https://ask.qcloudimg.com/raw/yehe-1b54603d7b98/k8pfdhqi7p.jpg?imageView2/2/w/120/h/7000)"></span></div><div class="com-media-body"><h3 class="com-side-topic-title" title="腾讯云原生专题">腾讯云原生专题</h3><div class="com-side-topic-desc" title="云原生技术干货，业务实践落地。">云原生技术干货，业务实践落地。</div></div></a></li></ul></div></section><section class="com-2-panel side J-activityRecommend"><header class="com-2-panel-hd"><h3 class="com-2-panel-title">活动推荐</h3></header><div class="com-2-panel-bd"><ul class="com-2-side-activities"><li><a href="https://cloud.tencent.com/developer/article/2269353" class="com-media com-2-side-activity" hotrep="community.column.article2.side_activity.0.link"><div class="com-media-body"><h3 class="com-2-side-activity-title" title="有奖征文丨玩转Cloud Studio">有奖征文丨玩转Cloud Studio</h3><div class="com-2-side-activity-desc" title="参与活动，赢取限量周边礼品">参与活动，赢取限量周边礼品</div></div><div class="com-media-object"><button type="button" class="s com-2-side-activity-btn c-btn c-btn-hole" hotrep="community.column.article2.side_activity.0.btn"><span class="text">立即参加</span></button></div></a></li><li><a href="https://cloud.tencent.com/developer/support-plan-invitation" class="com-media com-2-side-activity" hotrep="community.column.article2.side_activity.1.link"><div class="com-media-body"><h3 class="com-2-side-activity-title" title="邀请好友加入自媒体分享计划">邀请好友加入自媒体分享计划</h3><div class="com-2-side-activity-desc" title="邀请好友，同享奖励 30 / 100 / 180 元云服务器代金券">邀请好友，同享奖励 30 / 100 / 180 元云服务器代金券</div></div><div class="com-media-object"><button type="button" class="s com-2-side-activity-btn c-btn c-btn-hole" hotrep="community.column.article2.side_activity.1.btn"><span class="text">立即邀请</span></button></div></a></li></ul><header class="com-2-panel-subhd"><h3 class="com-2-panel-subtitle">运营活动</h3></header><div class="com-event-panel com-event-panel-l theme2 without-margin"><div class="com-event-panel-inner"><div class="com-event-panel-object"><a href="https://cloud.tencent.com/act/pro/cos?from=20165&amp;from_column=20165"><img class="com-event-panel-img" alt="活动名称" src="./通过一个完整例子彻底学会protobuf序列化原理_files/5ucevjlojf.png"></a><div class="com-event-panel-sign-wrap"><span class="com-event-panel-sign">广告</span><a href="javascript:;" class="com-event-panel-close">关闭</a></div></div></div></div></div></section><section class="com-2-section com-side-public" style="width:300px"><header class="com-2-section-hd"><h2 class="com-2-section-title without-icon"><span>关注</span></h2></header><div class="com-2-section-bd"><div class="com-side-public__title">腾讯云<em>开发者</em>公众号</div><div class="com-side-public__content"><div class="com-side-public__content-tag">将获得</div><div class="com-side-public__content-inner"><div class="com-side-public__content-detail"><div class="com-side-public__content-prize">10元无门槛代金券</div><div class="com-side-public__content-desc">洞察腾讯核心技术</div><div class="com-side-public__content-desc">剖析业界实践案例</div></div><div class="com-side-public__content-qr"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/37c294ec38218c34a57e6644033d3e02.png" alt="腾讯云开发者公众号二维码"></div></div></div></div></section><div style="height:20px"></div><div class="com-nav-bar absolute" style="overflow-y: auto; max-width: 300px; max-height: none; position: fixed; top: 60px;"><h3 class="com-nav-bar-title">目录</h3><ul class="com-nav-bar-menu"><li data-key="1.1" class="menu-item"><a href="javascript:;" title="背景">背景</a></li><li data-key="1.2" class="menu-item"><a href="javascript:;" title="一个完整的Protobuf举例">一个完整的Protobuf举例</a></li><li data-key="1.3" class="menu-item active"><a href="javascript:;" title="序列化结果分析">序列化结果分析</a></li></ul></div></div></div></div><div class="J-footer com-2-footer"><div class="com-2-footer-inner"><div class="com-2-footer-main"><div class="com-2-footer-main-ctn"><div class="com-2-footer-main-inner"><div class="com-2-footer-website"><ul class="com-2-footer-website-group"><li class="com-2-footer-website-column"><div class="com-2-footer-website-box"><h3 class="com-2-footer-website-title">社区</h3><ul class="com-2-footer-website-list"><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/column" hotrep="community.footer.community.article">专栏文章</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/inventory" hotrep="community.footer.community.inventory">阅读清单</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/ask" hotrep="community.footer.community.ask">互动问答</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/salon" hotrep="community.footer.community.salon">技术沙龙</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/video" hotrep="community.footer.community.video">技术视频</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/teams" hotrep="community.footer.community.teams">团队主页</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/timl" hotrep="community.footer.community.timl">腾讯云TI平台</a></li></ul></div></li><li class="com-2-footer-website-column"><div class="com-2-footer-website-box"><h3 class="com-2-footer-website-title">活动</h3><ul class="com-2-footer-website-list"><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/support-plan" hotrep="community.footer.activity.support-plan">自媒体分享计划</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/support-plan-invitation" hotrep="community.footer.activity.support-plan-invitation">邀请作者入驻</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/article/1535830" hotrep="community.footer.activity.article-1535830">自荐上首页</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/competition" hotrep="community.footer.activity.competition">技术竞赛</a></li></ul></div></li><li class="com-2-footer-website-column"><div class="com-2-footer-website-box"><h3 class="com-2-footer-website-title">资源</h3><ul class="com-2-footer-website-list"><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/specials" hotrep="community.footer.resource.specials">技术周刊</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/tags" hotrep="community.footer.resource.tags">社区标签</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/devdocs" hotrep="community.footer.community.devdocs">开发者手册</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/lab?from=20064&amp;from_column=20064" target="_blank" hotrep="community.footer.resource.labs">开发者实验室</a></li></ul></div></li><li class="com-2-footer-website-column"><div class="com-2-footer-website-box"><h3 class="com-2-footer-website-title">关于</h3><ul class="com-2-footer-website-list"><li class="com-2-footer-website-item"><a href="javascript:;" hotrep="community.footer.about.video">视频介绍</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/article/1006434" hotrep="community.footer.about.spec">社区规范</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/article/1006435" hotrep="community.footer.about.disclaimer">免责声明</a></li><li class="com-2-footer-website-item"><a href="mailto:cloudcommunity@tencent.com" hotrep="community.footer.about.contact">联系我们</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/friendlink" target="_blank" hotrep="community.footer.about.friendlink">友情链接</a></li></ul></div></li><li class="com-2-footer-website-column com-v-box"><div class="com-2-footer-website-box"><h3 class="com-2-footer-website-title">归档</h3><ul class="com-2-footer-website-list"><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/ask/archives.html">问题归档</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/column/archives.html">专栏文章归档</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/news/archives.html">快讯文章归档</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/information/all.html">关键词归档</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/devdocs/archives.html">开发者手册归档</a></li><li class="com-2-footer-website-item"><a href="https://cloud.tencent.com/developer/devdocs/sections_p1.html">开发者手册 Section 归档</a></li></ul></div></li></ul></div><div class="com-2-footer-copyright"><h3 class="com-2-footer-copyright-title">腾讯云开发者</h3><div class="com-2-footer-qr"><div class="com-2-footer-qr-object"><img class="com-2-footer-qr-image" src="./通过一个完整例子彻底学会protobuf序列化原理_files/a8907230cd5be483497c7e90b061b861.png" alt=""></div><p class="com-2-footer-qr-info"><span class="com-2-footer-qr-text">扫码关注腾讯云开发者</span></p><p class="com-2-footer-qr-info"><span class="com-2-footer-qr-text">领取腾讯云代金券</span></p></div></div></div></div></div></div><div class="com-2-footer-recommend"><div class="com-2-footer-inner"><div class="com-2-footer-recommend-rows"><div class="com-2-footer-recommend-cell"><h3 class="com-2-footer-recommend-tit">热门产品</h3><div class="com-2-footer-recommend-list-wrap"><ul class="com-2-footer-recommend-list"><li class="com-2-footer-recommend-item"><a href="https://dnspod.cloud.tencent.com/?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.ymzc">域名注册</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/cvm?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.cvm">云服务器</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/tbaas?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.tbaas">区块链服务</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/mq?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.mq">消息队列</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/dsa?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.dsa"> 网络加速</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/tencentdb-catalog?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.tencentdb-catalog">云数据库</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/cns?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.rmjx">域名解析</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/cos?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.cos">云存储</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/css?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmcp.css">视频直播</a></li></ul></div></div><div class="com-2-footer-recommend-cell"><h3 class="com-2-footer-recommend-tit">热门推荐</h3><div class="com-2-footer-recommend-list-wrap"><ul class="com-2-footer-recommend-list"><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/facerecognition?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.facerecognition">人脸识别</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/tm?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.tm">腾讯会议</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/act/pro/enterprise2019?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.enterprise2019">企业云</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/cdn-scd?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.cdn-scd">CDN 加速</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/trtc?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.trtc">视频通话</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/tiia?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.tiia">图像分析</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/cdb?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.cdb">MySQL 数据库</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/symantecssl?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.symantecssl">SSL 证书</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/asr?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.rmtj.asr">语音识别</a></li></ul></div></div><div class="com-2-footer-recommend-cell"><h3 class="com-2-footer-recommend-tit">更多推荐</h3><div class="com-2-footer-recommend-list-wrap"><ul class="com-2-footer-recommend-list"><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/solution/data_protection?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.data_protection">数据安全</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/clb?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.clb">负载均衡</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/sms?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.sms">短信</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/ocr?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.ocr">文字识别</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/vod?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.vod">云点播</a></li><li class="com-2-footer-recommend-item"><a href="https://tm.cloud.tencent.com/?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.tm">商标注册</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/solution/la?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.la">小程序开发</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/cat?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.cat">网站监控</a></li><li class="com-2-footer-recommend-item"><a href="https://cloud.tencent.com/product/cdm?from=20064&amp;from_column=20064" class="com-2-footer-recommend-link" target="_blank" hotrep="community.footer.gdtj.cdm">数据迁移</a></li></ul></div></div></div></div></div><div class="com-2-footer-copyright-cnt"><div class="com-2-footer-inner"><p>Copyright © 2013 - 2023 Tencent Cloud. All Rights Reserved. 腾讯云 版权所有 </p><p>深圳市腾讯计算机系统有限公司 ICP备案/许可证号：<a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" hotrep="community.footer.link.miitbeian">粤B2-20090059<!-- --> </a><a href="https://www.beian.gov.cn/portal/index.do" target="_blank" hotrep="community.footer.link.shenbeian">深公网安备号 44030502008569</a></p><p>腾讯云计算（北京）有限责任公司 京ICP证150476号 | <!-- --> <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" hotrep="community.footer.link.beian">京ICP备11018762号</a>  |<a href="https://www.beian.gov.cn/portal/index.do" target="_blank" hotrep="community.footer.link.jingbeian" style="margin-left:4px">京公网安备号11010802020287</a></p></div></div></div></div><div class="com-widget-global"><div style="position:relative;z-index:8088"><div class="c-bubble-trigger com-widget-qr"><button class="scan-btn" hotrep="community.edge-widget.follow-oa">扫描二维码</button><div class="c-bubble c-bubble-right "><div class="c-bubble-inner"><div class="qr-img"><img src="./通过一个完整例子彻底学会protobuf序列化原理_files/dad61ae6b851b4580d23ffcc4823aef5.png" alt=""></div><p class="qr-txt">扫码关注腾讯云开发者</p><p class="qr-txt">领取腾讯云代金券</p></div></div></div></div><button class="widget-btn widget-back2top" title="返回顶部" hotrep="community.edge-widget.back2top" style="outline: none;">返回顶部</button></div><div id="dialog-root"></div><div id="rno-dialog-root" class="rno-modal-wrap"></div></div><script>window.isServerContext = false; window.isClientContext = true;</script><script>window.$serverTime = 1682585681657; window.$clientTime = 1682585681657;</script><script>window.$ua = {"browser":{"name":"Chrome","version":"103.0.0.0","major":"103"},"cpu":{"architecture":"amd64"},"device":{},"engine":{"name":"Blink","version":"103.0.0.0"},"os":{"name":"Linux","version":"x86_64"}};</script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/polyfill.6.26.min.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/react.16.8.6.min.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/react-dom.16.8.6.min.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/jquery-3.2.1.min.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/base.225e98f95c.js" crossorigin="anonymous"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/draft-master-v1.4.82.d4s2ddo9sb.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/api.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/wechatJsSdk.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/common.92d274c2f7.js" crossorigin="anonymous"></script><div id="tea-overlay-root"></div><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/hls.min.0.13.2m.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/tcplayer.v4.1.min.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/qcloudStatApi.js"></script><script src="./通过一个完整例子彻底学会protobuf序列化原理_files/article-detail.21f26794bc.js" crossorigin="anonymous"></script><script>
window.$render({"articleDetail":{"id":1520442,"articleId":1520442,"title":"通过一个完整例子彻底学会protobuf序列化原理","content":"entityMap|0|type|IMAGE|mutability|IMMUTABLE|data|placeHolderUrl|error|dpi|imageUrl|https://ask.qcloudimg.com/draft/1300884/2q0w6ewaij.png|name|一个完整的protobuf例子，包含全部pb支持的数据类型|blockWidth|blockHeight|1|https://ask.qcloudimg.com/draft/1300884/7mo37ygdiy.png|测试程序的输出结果|2|https://ask.qcloudimg.com/draft/1300884/ga79ehlx76.png|逐字节解释序列化结果的含义|3|https://ask.qcloudimg.com/draft/1300884/gofqmrws8t.png|4|https://ask.qcloudimg.com/draft/1300884/8xmlb5is9v.png|5|LINK|MUTABLE|url|https://cloud.tencent.com/developer/article/1473541|6|https://ask.qcloudimg.com/draft/1300884/fk5byb1ild.png|field+number大于16时，必须使用多个字节表示|blocks|key|lrjl|text|背景|header-one|depth|inlineStyleRanges|entityRanges|6mqn8|Protobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很多，节约流量。对于pb协议的具体使用方法，其官网有比较详细的说明，本文不再详述。我们的数据不管在代码中是什么复杂结构体，传输时都要序列化成二进制串。官网中也介绍了Protobuf的序列化算法，不过给的例子比较简单，学习起来不够直观。因此，本文用一个较为完整的例子直观展示一下Protobuf的序列化，一个例子即可搞懂Protobuf的序列化算法。|unstyled|esh1e|一个完整的Protobuf举例|4nguc|code.png|atomic|offset|length|e7lhg|这个例子有一个特点，就是AllDataType这一结构体中包含了Protobuf所支持的全部数据类型。下一步，使用protoc编译该proto文件，并在程序中声明一个AllDataType类型的数据，将其序列化，并打印出来。下面的代码是以golang为例：|style|CODE|5ctil|package+main\nimport+(\n++++\"fmt\"\n++++\"\u003Cpath-to\u003E/example\"\n++++\"github.com/golang/protobuf/proto\"\n)\nfunc+main()+{\n++++test+:=+example.AllDataType{\n++++++++Fint32:++++++257,\n++++++++Fint64:++++++-2,\n++++++++Fuint32:+++++1,\n++++++++Fuint64:+++++1025,\n++++++++Fsint32:+++++0,\n++++++++Fsint64:+++++-2,\n++++++++Ffixed32:++++17,\n++++++++Ffixed64:++++2049,\n++++++++Fdouble:+++++-0.1,\n++++++++Ffloat:++++++0.6,\n++++++++Fbool:+++++++true,\n++++++++Fenum:+++++++example.DayOfWeek_SUNDAY,\n++++++++Fmessage:++++&example.Child{Fsint64:+3},\n++++++++Fmap:++++++++map[uint32]float64{3:+-0.1,+0:+2.12},\n++++++++Frepeatbool:+[]bool{true,+false,+true},\n++++++++Fstring:+++++\"Hello+World\",\n++++++++Fbytes:++++++[]byte{129,+0,+19,+56},\n++++++++Fsfixed32:+++12345,\n++++++++Fsfixed64:+++54321,\n++++}\n++++data,+_+:=+proto.Marshal(&test)+//+protobuf将结构体序列化为二进制串\n++++fmt.Println(data)+//+打印AllDataType类型的数据序列化后的二进制串\n}|code-block|syntax|go|4319a|最后一行打印的结果为：|f3j72|执行结果.png|8898c|序列化结果分析|7gkt5|接下来就是最关键的一幅图，我们逐个字节地来分析一下上面的打印结果中，每个字节所代表的含义（可查看大图）：|8s4hm|pb编码规则.png|3pv5r|【1】图中橙色部分（如第1行第1列，第1行第4列）用于表示字段field+number（简写为fn）以及wire+type（简写为wt）。其中field+number是proto文件中标注的该字段数字代号，而wire+type表示本字段的数据类型属于哪种归类，这些归类主要用于提醒反序列化程序如何判断本字段值占据几个字节。Wire+type值与数据类型的映射关系为：|BOLD|7q5v5|[表格]|table|aligns|7gb2q|align|left|c5p74|49kcs|rows|9ssgl|cells|2ir6l|raw|593ka|Wire+Type|d7ka2|a7q9c|解释|9le94|2dene|数据类型|7933i|ecd32|fhvmb|fi761|cuk7i|varint变长整型（见下文）|2sm6h|4mvg0|int32,+int64,+uint32,+uint64,+sint32,+sint64,+bool,+enum|6dlfk|75i8v|3kg0a|7viqb|f8ocu|固定8字节|75lib|c1b8s|fixed64,+sfixed64,+double|11hoo|3okh3|6tp3r|n5jr|398vt|需显式告知长度（见下文）|c91tm|9m3bk|string,+bytes,+嵌套类型（embedded+messages），repeated字段|egae5|72ckn|bi626|5r72h|bafof|（已废弃）|ea0kk|bahaf|bgqp2|bshco|30g5v|3kbhq|5acd2|9ctuc|6rmak|b1ovc|6nelk|fvhr2|41bna|eaq17|固定4字节|84arl|a62q7|fixed32,+sfixed32,+float|7n6qj|因为wire+type种类很少，为了进一步节约字节，write+type只用了3个bits来表示，而fn则使用更高位来表示：|fn8uh|fn和wt.png|cnh3s|【2】参考【1】中的表格，大部分整数类型的wire+type都是varint变长整型。Varint简单说就是每个字节最高位不用来表示具体数值，只用来表示“本字节是不是这个数字的最后一个字节”。0表示最后一个字节，1表示不是最后一字节、后面还有。因此如果要把varint还原为普通的二进制表示，需要去掉最高bit，把剩下的7个bit组合起来看。一图胜千言：|b85to|varint.png|5b1iq|需要注意protobuf的varint采用类似小端模式，因此图中第1行第3列存的是高位，第2列是低位，转化十进制过程中需要把他们调换一下位置，其他使用varint的类型也是类似机制。|dg7bp|【3】注意从第1行第5列到第2行第1列，所存储的数字是int64类型的-2，占据10个字节，这甚至比不使用varint所占的空间还要大。主要原因是负数在计算机中采用补码存储，int类型-2本来存储上就等同于一个特别大的unsigned+int，需要用很多字节去存储，而varint还把每字节8bits最高位用来干别的事情，不用来表示数值了，导致每个字节都少了一个可用的bit位。这里也可以看出只使用varint的弊端，对于int类型的负数（或unsigned+int类型的特别大正数），完全没有起到节约字节数的效果。因此protobuf中出现了sint32和sint64类型，该类型使用ZigZag来优化。ZigZag规则为，如果是负数，则存储其绝对值的2倍减1；如果为非负数，则存储其绝对值的2倍。这样就可以把int类型1对1映射为unsigned+int类型。这一规则对应图中的第2行第8列，数字-2其实二进制存储的是正整数3（[zz]表示ZigZag）。|a9pat|ZigZag的优化主要基于一个事实：我们在传输数据时，所传的整数大多是和0比较接近的小正数或者小负数，很少传输绝对值特别大的负数或正数。满足这一事实的场景下，推荐把protobuf中的int32和int64都替换为sint32和sint64，节约字节数。|a13vs|【4】Varint和ZigZag方法其实没有优化绝对值特别大的数。例如如果要传输的数字是int32最大值2147483647，本来是4个字节，使用varint反而需要5个字节了。因此，fixed32和fixed64类型就是为这种场景设计。这种情况下，数字直接按照它的二进制表示进行序列化，固定占用4字节或8字节，例如图中的第3行第2列到第9列，表示的是2049。由于2049是一个比较小的整数，因此会有很多0来填充空余字节，比较浪费。|erm4m|【5】Protobuf表示浮点数的类型是double（8字节）和float（4字节）。浮点数也是直接按照它的二进制表示进行序列化。例如第4行第7列至第10列，4字节浮点数0.6被序列化为+[154+153+25+63]+（小端模式ASCII码），这正是0.6在内存中的存储方式。至于怎么算出来的，不再详细展开，可以参考链接。|5nv3v|【6】Protobuf序列化时会直接忽略为空值的字段，例如fn=5的字段根本没有在图中出现，主要原因是fn=5的字段Fsint值为0，属于空值（默认值）。直接忽略可进一步节约字节数。|4645h|【7】图中的浅紫色字段表示的是字段长度，它专属于wire+type=2的字段。当wire+type=2时，protobuf并不知道对应的值到底占据几个字节，需要在fn和wt后面紧跟一个长度数字。需要注意的是字段长度数值也属于varint表示的无符号整型。|ato5h|【8】对于在proto文件中用repeat修饰的字段，值部分会连续出现多次，如第7行第6列到第10列。一般repeat字段都被当成数组。|5a2f2|【9】注意第8行第12列和第13列，当fn大于15时，一个字节已经不足以序列化fn%2Bwt部分了，这时fn%2Bwt会被当成一个数字，按照varint的形式来序列化。|68gme|超过2字节的fn和wt.png|5imcr|因为fn大于15的字段需要至少2个字节来存储fn%2Bwt，protobuf建议，把fn小于16的值留给最常用字段，以节约字节数。|b3dgc|最后，总结一下在Protobuf协议定义时，怎样选取合适的整数类型：|eihb0|（1）有符号整型，大多数值都不算很大（4字节绝对值小于2%5E27，8字节绝对值小于2%5E55），使用sint32和sint64|73gnt|（2）有符号整型，大多数值都特别大（4字节绝对值大于2%5E27，8字节绝对值大于2%5E55），使用sfixed32，sfixed64|3jfs2|（3）无符号整型，大多数值都不算很大（4字节绝对值小于2%5E28，8字节绝对值小于2%5E56），使用uint32和uint64|9btfb|（4）无符号整型，大多数值都特别大（4字节绝对值大于2%5E28，8字节绝对值大于2%5E56），使用fixed32和fixed64|1jm5a|（5）有符号整型，绝大多数数值都是不算很大的正数（4字节绝对值小于2%5E27，8字节绝对值小于2%5E55），但在极少数情况下可能出现负值，使用int32和int64。^0|15W|1JC|2O|HT|33|2O|ZC|LK|0|9W|3X|0|7J|66|0|AV|70|0|0|0|0|0|8|0|0|C|B|2B|B|0|0|0|0|8|1|0|0|0|0|A|2|0|3Q|Q|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|9|3|0|17|1G|0|0|A|4|0|N|4|0|8F|1A|0|I|1D|0|3B|10|0|4F|2|5|0|0|0|0|0|0|F|6|0|13|N|0|0|0|0|0|0^^$0|$1|$2|3|4|5|6|$7|-3|8|-3|9|5A|A|B|C|D|E|5B|F|5C]]|G|$2|3|4|5|6|$7|-3|8|-3|9|5D|A|H|C|I|E|5E|F|5F]]|J|$2|3|4|5|6|$7|-3|8|-3|9|5G|A|K|C|L|E|5H|F|5I]]|M|$2|3|4|5|6|$7|-3|8|-3|9|5J|A|N|E|5K|F|5L]]|O|$2|3|4|5|6|$7|-3|8|-3|9|5M|A|P|E|5N|F|5O]]|Q|$2|R|4|S|6|$T|U]]|V|$2|3|4|5|6|$7|-3|8|-3|9|5P|A|W|C|X|E|5Q|F|5R]]]|Y|@$Z|10|11|12|2|13|14|5S|15|@]|16|@]|6|$]]|$Z|17|11|18|2|19|14|5T|15|@]|16|@]|6|$]]|$Z|1A|11|1B|2|13|14|5U|15|@]|16|@]|6|$]]|$Z|1C|11|1D|2|1E|14|5V|15|@]|16|@$1F|5W|1G|5X|Z|5Y]]|6|$]]|$Z|1H|11|1I|2|19|14|5Z|15|@$1F|60|1G|61|1J|1K]|$1F|62|1G|63|1J|1K]]|16|@]|6|$]]|$Z|1L|11|1M|2|1N|14|64|15|@]|16|@]|6|$1O|1P]]|$Z|1Q|11|1R|2|19|14|65|15|@]|16|@]|6|$]]|$Z|1S|11|1T|2|1E|14|66|15|@]|16|@$1F|67|1G|68|Z|69]]|6|$]]|$Z|1U|11|1V|2|13|14|6A|15|@]|16|@]|6|$]]|$Z|1W|11|1X|2|19|14|6B|15|@]|16|@]|6|$]]|$Z|1Y|11|1Z|2|1E|14|6C|15|@]|16|@$1F|6D|1G|6E|Z|6F]]|6|$]]|$Z|20|11|21|2|19|14|6G|15|@$1F|6H|1G|6I|1J|22]]|16|@]|6|$]]|$Z|23|11|24|2|25|14|6J|15|@]|16|@]|6|$26|@$Z|27|28|29]|$Z|2A|28|29]|$Z|2B|28|29]]|2C|@$Z|2D|2E|@$Z|2F|2G|$0|$]|Y|@$Z|2H|11|2I|2|19|14|6K|15|@]|16|@]|6|$]]]]]|$Z|2J|2G|$0|$]|Y|@$Z|2K|11|2L|2|19|14|6L|15|@]|16|@]|6|$]]]]]|$Z|2M|2G|$0|$]|Y|@$Z|2N|11|2O|2|19|14|6M|15|@]|16|@]|6|$]]]]]]]|$Z|2P|2E|@$Z|2Q|2G|$0|$]|Y|@$Z|2R|11|1|2|19|14|6N|15|@]|16|@]|6|$]]]]]|$Z|2S|2G|$0|$]|Y|@$Z|2T|11|2U|2|19|14|6O|15|@]|16|@]|6|$]]]]]|$Z|2V|2G|$0|$]|Y|@$Z|2W|11|2X|2|19|14|6P|15|@]|16|@]|6|$]]]]]]]|$Z|2Y|2E|@$Z|2Z|2G|$0|$]|Y|@$Z|30|11|G|2|19|14|6Q|15|@]|16|@]|6|$]]]]]|$Z|31|2G|$0|$]|Y|@$Z|32|11|33|2|19|14|6R|15|@]|16|@]|6|$]]]]]|$Z|34|2G|$0|$]|Y|@$Z|35|11|36|2|19|14|6S|15|@]|16|@]|6|$]]]]]]]|$Z|37|2E|@$Z|38|2G|$0|$]|Y|@$Z|39|11|J|2|19|14|6T|15|@]|16|@]|6|$]]]]]|$Z|3A|2G|$0|$]|Y|@$Z|3B|11|3C|2|19|14|6U|15|@]|16|@]|6|$]]]]]|$Z|3D|2G|$0|$]|Y|@$Z|3E|11|3F|2|19|14|6V|15|@]|16|@]|6|$]]]]]]]|$Z|3G|2E|@$Z|3H|2G|$0|$]|Y|@$Z|3I|11|M|2|19|14|6W|15|@]|16|@]|6|$]]]]]|$Z|3J|2G|$0|$]|Y|@$Z|3K|11|3L|2|19|14|6X|15|@]|16|@]|6|$]]]]]|$Z|3M|2G|$0|$]|Y|@$Z|3N|11|3L|2|19|14|6Y|15|@]|16|@]|6|$]]]]]]]|$Z|3O|2E|@$Z|3P|2G|$0|$]|Y|@$Z|3Q|11|O|2|19|14|6Z|15|@]|16|@]|6|$]]]]]|$Z|3R|2G|$0|$]|Y|@$Z|3S|11|3L|2|19|14|70|15|@]|16|@]|6|$]]]]]|$Z|3T|2G|$0|$]|Y|@$Z|3U|11|3L|2|19|14|71|15|@]|16|@]|6|$]]]]]]]|$Z|3V|2E|@$Z|3W|2G|$0|$]|Y|@$Z|3X|11|Q|2|19|14|72|15|@]|16|@]|6|$]]]]]|$Z|3Y|2G|$0|$]|Y|@$Z|3Z|11|40|2|19|14|73|15|@]|16|@]|6|$]]]]]|$Z|41|2G|$0|$]|Y|@$Z|42|11|43|2|19|14|74|15|@]|16|@]|6|$]]]]]]]]]]|$Z|44|11|45|2|19|14|75|15|@]|16|@]|6|$]]|$Z|46|11|47|2|1E|14|76|15|@]|16|@$1F|77|1G|78|Z|79]]|6|$]]|$Z|48|11|49|2|19|14|7A|15|@$1F|7B|1G|7C|1J|22]]|16|@]|6|$]]|$Z|4A|11|4B|2|1E|14|7D|15|@]|16|@$1F|7E|1G|7F|Z|7G]]|6|$]]|$Z|4C|11|4D|2|19|14|7H|15|@$1F|7I|1G|7J|1J|22]]|16|@]|6|$]]|$Z|4E|11|4F|2|19|14|7K|15|@$1F|7L|1G|7M|1J|22]]|16|@]|6|$]]|$Z|4G|11|4H|2|19|14|7N|15|@$1F|7O|1G|7P|1J|22]]|16|@]|6|$]]|$Z|4I|11|4J|2|19|14|7Q|15|@$1F|7R|1G|7S|1J|22]]|16|@]|6|$]]|$Z|4K|11|4L|2|19|14|7T|15|@]|16|@$1F|7U|1G|7V|Z|7W]]|6|$]]|$Z|4M|11|4N|2|19|14|7X|15|@]|16|@]|6|$]]|$Z|4O|11|4P|2|19|14|7Y|15|@]|16|@]|6|$]]|$Z|4Q|11|4R|2|19|14|7Z|15|@]|16|@]|6|$]]|$Z|4S|11|4T|2|19|14|80|15|@]|16|@]|6|$]]|$Z|4U|11|4V|2|1E|14|81|15|@]|16|@$1F|82|1G|83|Z|84]]|6|$]]|$Z|4W|11|4X|2|19|14|85|15|@$1F|86|1G|87|1J|22]]|16|@]|6|$]]|$Z|4Y|11|4Z|2|19|14|88|15|@]|16|@]|6|$]]|$Z|50|11|51|2|19|14|89|15|@]|16|@]|6|$]]|$Z|52|11|53|2|19|14|8A|15|@]|16|@]|6|$]]|$Z|54|11|55|2|19|14|8B|15|@]|16|@]|6|$]]|$Z|56|11|57|2|19|14|8C|15|@]|16|@]|6|$]]|$Z|58|11|59|2|19|14|8D|15|@]|16|@]|6|$]]]]","plain":"背景\nProtobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很多，节约流量。对于pb协议的具体使用方法，其官网有比较详细的说明，本文不再详述。我们的数据不管在代码中是什么复杂结构体，传输时都要序列化成二进制串。官网中也介绍了Protobuf的序列化算法，不过给的例子比较简单，学习起来不够直观。因此，本文用一个较为完整的例子直观展示一下Protobuf的序列化，一个例子即可搞懂Protobuf的序列化算法。\n一个完整的Protobuf举例\ncode.png\n这个例子有一个特点，就是AllDataType这一结构体中包含了Protobuf所支持的全部数据类型。下一步，使用protoc编译该proto文件，并在程序中声明一个AllDataType类型的数据，将其序列化，并打印出来。下面的代码是以golang为例：\npackage main\nimport (\n    \"fmt\"\n    \"\u003Cpath-to\u003E/example\"\n    \"github.com/golang/protobuf/proto\"\n)\nfunc main() {\n    test := example.AllDataType{\n        Fint32:      257,\n        Fint64:      -2,\n        Fuint32:     1,\n        Fuint64:     1025,\n        Fsint32:     0,\n        Fsint64:     -2,\n        Ffixed32:    17,\n        Ffixed64:    2049,\n        Fdouble:     -0.1,\n        Ffloat:      0.6,\n        Fbool:       true,\n        Fenum:       example.DayOfWeek_SUNDAY,\n        Fmessage:    &example.Child{Fsint64: 3},\n        Fmap:        map[uint32]float64{3: -0.1, 0: 2.12},\n        Frepeatbool: []bool{true, false, true},\n        Fstring:     \"Hello World\",\n        Fbytes:      []byte{129, 0, 19, 56},\n        Fsfixed32:   12345,\n        Fsfixed64:   54321,\n    }\n    data, _ := proto.Marshal(&test) // protobuf将结构体序列化为二进制串\n    fmt.Println(data) // 打印AllDataType类型的数据序列化后的二进制串\n}\n最后一行打印的结果为：\n执行结果.png\n序列化结果分析\n接下来就是最关键的一幅图，我们逐个字节地来分析一下上面的打印结果中，每个字节所代表的含义（可查看大图）：\npb编码规则.png\n【1】图中橙色部分（如第1行第1列，第1行第4列）用于表示字段field number（简写为fn）以及wire type（简写为wt）。其中field number是proto文件中标注的该字段数字代号，而wire type表示本字段的数据类型属于哪种归类，这些归类主要用于提醒反序列化程序如何判断本字段值占据几个字节。Wire type值与数据类型的映射关系为：\nWire Type\t解释\t数据类型\n0\tvarint变长整型（见下文）\tint32, int64, uint32, uint64, sint32, sint64, bool, enum\n1\t固定8字节\tfixed64, sfixed64, double\n2\t需显式告知长度（见下文）\tstring, bytes, 嵌套类型（embedded messages），repeated字段\n3\t（已废弃）\t（已废弃）\n4\t（已废弃）\t（已废弃）\n5\t固定4字节\tfixed32, sfixed32, float\n\n因为wire type种类很少，为了进一步节约字节，write type只用了3个bits来表示，而fn则使用更高位来表示：\nfn和wt.png\n【2】参考【1】中的表格，大部分整数类型的wire type都是varint变长整型。Varint简单说就是每个字节最高位不用来表示具体数值，只用来表示“本字节是不是这个数字的最后一个字节”。0表示最后一个字节，1表示不是最后一字节、后面还有。因此如果要把varint还原为普通的二进制表示，需要去掉最高bit，把剩下的7个bit组合起来看。一图胜千言：\nvarint.png\n需要注意protobuf的varint采用类似小端模式，因此图中第1行第3列存的是高位，第2列是低位，转化十进制过程中需要把他们调换一下位置，其他使用varint的类型也是类似机制。\n【3】注意从第1行第5列到第2行第1列，所存储的数字是int64类型的-2，占据10个字节，这甚至比不使用varint所占的空间还要大。主要原因是负数在计算机中采用补码存储，int类型-2本来存储上就等同于一个特别大的unsigned int，需要用很多字节去存储，而varint还把每字节8bits最高位用来干别的事情，不用来表示数值了，导致每个字节都少了一个可用的bit位。这里也可以看出只使用varint的弊端，对于int类型的负数（或unsigned int类型的特别大正数），完全没有起到节约字节数的效果。因此protobuf中出现了sint32和sint64类型，该类型使用ZigZag来优化。ZigZag规则为，如果是负数，则存储其绝对值的2倍减1；如果为非负数，则存储其绝对值的2倍。这样就可以把int类型1对1映射为unsigned int类型。这一规则对应图中的第2行第8列，数字-2其实二进制存储的是正整数3（[zz]表示ZigZag）。\nZigZag的优化主要基于一个事实：我们在传输数据时，所传的整数大多是和0比较接近的小正数或者小负数，很少传输绝对值特别大的负数或正数。满足这一事实的场景下，推荐把protobuf中的int32和int64都替换为sint32和sint64，节约字节数。\n【4】Varint和ZigZag方法其实没有优化绝对值特别大的数。例如如果要传输的数字是int32最大值2147483647，本来是4个字节，使用varint反而需要5个字节了。因此，fixed32和fixed64类型就是为这种场景设计。这种情况下，数字直接按照它的二进制表示进行序列化，固定占用4字节或8字节，例如图中的第3行第2列到第9列，表示的是2049。由于2049是一个比较小的整数，因此会有很多0来填充空余字节，比较浪费。\n【5】Protobuf表示浮点数的类型是double（8字节）和float（4字节）。浮点数也是直接按照它的二进制表示进行序列化。例如第4行第7列至第10列，4字节浮点数0.6被序列化为 [154 153 25 63] （小端模式ASCII码），这正是0.6在内存中的存储方式。至于怎么算出来的，不再详细展开，可以参考链接。\n【6】Protobuf序列化时会直接忽略为空值的字段，例如fn=5的字段根本没有在图中出现，主要原因是fn=5的字段Fsint值为0，属于空值（默认值）。直接忽略可进一步节约字节数。\n【7】图中的浅紫色字段表示的是字段长度，它专属于wire type=2的字段。当wire type=2时，protobuf并不知道对应的值到底占据几个字节，需要在fn和wt后面紧跟一个长度数字。需要注意的是字段长度数值也属于varint表示的无符号整型。\n【8】对于在proto文件中用repeat修饰的字段，值部分会连续出现多次，如第7行第6列到第10列。一般repeat字段都被当成数组。\n【9】注意第8行第12列和第13列，当fn大于15时，一个字节已经不足以序列化fn+wt部分了，这时fn+wt会被当成一个数字，按照varint的形式来序列化。\n超过2字节的fn和wt.png\n因为fn大于15的字段需要至少2个字节来存储fn+wt，protobuf建议，把fn小于16的值留给最常用字段，以节约字节数。\n最后，总结一下在Protobuf协议定义时，怎样选取合适的整数类型：\n（1）有符号整型，大多数值都不算很大（4字节绝对值小于2^27，8字节绝对值小于2^55），使用sint32和sint64\n（2）有符号整型，大多数值都特别大（4字节绝对值大于2^27，8字节绝对值大于2^55），使用sfixed32，sfixed64\n（3）无符号整型，大多数值都不算很大（4字节绝对值小于2^28，8字节绝对值小于2^56），使用uint32和uint64\n（4）无符号整型，大多数值都特别大（4字节绝对值大于2^28，8字节绝对值大于2^56），使用fixed32和fixed64\n（5）有符号整型，绝大多数数值都是不算很大的正数（4字节绝对值小于2^27，8字节绝对值小于2^55），但在极少数情况下可能出现负值，使用int32和int64。","brief":"背景\nProtobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很...","summary":"Protobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很多，节...","abstract":"Protobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很多，节...","posterSummary":"Protobuf是我们在网络传输中经常会用到的协议，优点是版本间兼容性强，对数据序列化时的极致压缩使得Protobuf包体积比xml、json等格式要小很多，节约流量。对于pb协议的具体使用方法，其官网有比较详细的说明，本文不再详述。我们的数据不管在代码中是什么复杂结构体，传输时都要序列化成二进制串。官网中也介绍了Protobuf的序列化算法，不过给的例子比较简单，学习起来不够直观。因此，本文用一...","description":"通过一个完整例子彻底学会protobuf序列化原理。【3】注意从第1行第5列到第2行第1列，所存储的数字是int64类型的-2，占据10个字节，这甚至比不使用varint所占的空间还要大。主要原因是负数在计算机中采用补码存储，int类型-2本来存储上就等同于一个特别大的unsigned int，需要用很多字节去存储，而varint还把每字节8bits最高位用来干别的事情，不用来表示数值了，导致每个字节都少了一个可用的bit位。直接忽略可进一步节约字节数。","picture":"https://ask.qcloudimg.com/draft/1300884/2q0w6ewaij.png","coverImageUrl":"https://ask.qcloudimg.com/draft/1300884/2q0w6ewaij.png","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{},"authorId":1300884,"columnId":4656,"writeTime":1571022605,"updateTime":1571022605,"viewCount":9540,"likeCount":12,"commentCount":1,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[10174,10759],"tags":[{"id":10174,"tagId":10174,"name":"go","groupId":10120,"groupName":"编程语言","tagName":"go","categoryId":3,"articleCount":0,"disable":0},{"id":10759,"tagId":10759,"name":"rpc","groupId":10133,"groupName":"开发技术","tagName":"rpc","categoryId":3,"articleCount":0,"disable":0}],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"keywords":[],"focusRead":false,"publishTime":1571022605,"editTime":0,"isCloseTextLink":false,"isTencent":1,"author":{"id":1300884,"name":"horstxu","label":"腾讯公司内部员工 做web开发","avatar":"https://ask.qcloudimg.com/avatar/1300884/dlk1i79vwc.png","company":"腾讯","title":"软件工程师","isProfessionVerified":true,"isInternal":true,"badgeInfo":{"list":[4],"entities":{"4":{"id":4,"uid":1300884,"status":2,"level":2}}},"statInfo":{"articleCount":9,"validArticleCount":9,"joinedColumnCount":1,"followColumnCount":3,"uid":1300884,"beLikeNum":141,"articleReadNum":102570,"articleRecommNum":1,"answerRecommNum":0,"contribNum":0,"createTime":"2019-09-09 15:51:41","articleCommentNum":8,"articleFavNum":10,"yesterdayBeLikeNum":141,"yesterdayArticleReadNum":102527,"yesterdayArticleRecommNum":1,"yesterdayAnswerRecommNum":0,"yesterdayContribNum":0,"yesterdayArticleCommentNum":8,"yesterdayArticleFavNum":10},"rank":6054,"userTeams":[],"fromInfo":{"uid":1300884,"from":884,"firstPublishNum":8}},"column":{"id":4656,"name":"horstxu的博客","desc":"","icon":"https://imgcache.qq.com/qcloud/developer/images/release/column-icons/8.png","background":"","status":2,"creatorId":1300884,"memberCount":1,"articleCount":9,"followCount":16,"createdTime":1532678589,"creator":{"1300884":{"id":1300884,"name":"horstxu","label":"腾讯公司内部员工 做web开发","avatar":"https://ask.qcloudimg.com/avatar/1300884/dlk1i79vwc.png","company":"腾讯","title":"软件工程师","isProfessionVerified":true,"isInternal":true}}},"translator":{},"textLinks":[]},"articleAuditInfo":null,"commentsData":{"fetchStatus":"none","pageNumber":1,"pageSize":10,"total":0,"list":[]},"hotArticleList":[{"id":125267,"weight":1682576153,"type":8,"detail":{"abstract":"解释一下什么是Cloud Studio ，是一个基于浏览器的集成式开发环境（IDE），为开发者提供了一个永不间断的云端工作站。用户在使用 Cloud Studio 时无需安装，随时随地打开浏览器就能在线编程。","articleId":2274737,"coverImageUrl":"","weight":1682576153,"avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","author":{"id":2799756,"name":"小唐同学.","label":"不用媒介，同样精彩！","avatar":"https://ask.qcloudimg.com/http-save/yehe-2799756/35372eab1230d6816f813706c558443c.jpg","company":"腾云先锋","title":"腾云先锋（TDP）成员","isProfessionVerified":true,"isInternal":false},"authorBadgeInfo":{}},"createTime":1682576153,"objId":2274737,"entry":0,"readNum":30,"showReadNum":30,"abstract":"解释一下什么是Cloud Studio ，是一个基于浏览器的集成式开发环境（IDE），为开发者提供了一个永不间断的云端工作站。用户在使用 Cloud Studio 时无需安装，随时随地打开浏览器就能在线编程。","articleId":2274737,"coverImageUrl":"","avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","title":"【玩转 Cloud Studio】搭建属于自己的文档网站","writeTime":1682564623,"tags":[{"tagId":11347,"tagName":"Cloud Studio（云端 IDE）"}],"picture":"","author":{"id":2799756,"name":"小唐同学.","avatar":"https://ask.qcloudimg.com/http-save/yehe-2799756/35372eab1230d6816f813706c558443c.jpg"}},{"id":125265,"weight":1682576145,"type":8,"detail":{"articleId":2273366,"abstract":"?腾小云导读\n最近，AI图像生成引人注目，它能够根据文字描述生成精美图像，这极大地改变了人们的图像创作方式。Stable Diffusion作为一款高性能模型，它生成的图像质量更高、运行速度更快、消耗的资源以及内存占用更小，是AI图像生成领域的里程碑。本篇文章作者将手把手教大家入门 Stable Diffusion，可以先收藏再浏览，避免迷路！\n?看目录，点收藏\n1 硬件要求\n2 环境部署\n    2.1 手动部署\n    2.2 自动整合包\n3 关于插件\n4 文生图最简流程——重点步骤与参数\n5 提示词\n","coverImageUrl":"","weight":1682576145,"avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","author":{"id":1422024,"name":"腾讯云开发者","label":"关注「腾讯云开发者」公众号，将获得：10元无门槛代金券、洞察腾讯核心技术、剖析业界实践案例。","avatar":"https://developer.qcloudimg.com/http-save/10011/5219d8aaa3af9ce46e90ac5f2b200821.jpg","company":"腾讯","title":"","isProfessionVerified":false,"isInternal":true},"authorBadgeInfo":{}},"createTime":1682576145,"objId":2273366,"entry":0,"readNum":32,"showReadNum":78,"articleId":2273366,"abstract":"?腾小云导读\n最近，AI图像生成引人注目，它能够根据文字描述生成精美图像，这极大地改变了人们的图像创作方式。Stable Diffusion作为一款高性能模型，它生成的图像质量更高、运行速度更快、消耗的资源以及内存占用更小，是AI图像生成领域的里程碑。本篇文章作者将手把手教大家入门 Stable Diffusion，可以先收藏再浏览，避免迷路！\n?看目录，点收藏\n1 硬件要求\n2 环境部署\n    2.1 手动部署\n    2.2 自动整合包\n3 关于插件\n4 文生图最简流程——重点步骤与参数\n5 提示词\n","coverImageUrl":"","avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","title":"给想玩AI的新手｜Stable Diffusion 保姆级入门手册","writeTime":1682475061,"tags":[{"tagId":10332,"tagName":"神经网络"},{"tagId":17381,"tagName":"模型"},{"tagId":17416,"tagName":"入门"},{"tagId":17440,"tagName":"数据"},{"tagId":17554,"tagName":"优化"}],"picture":"https://developer.qcloudimg.com/http-save/yehe-1422024/46206296cae1694bebaf1759cb010734.jpg","author":{"id":1422024,"name":"腾讯云开发者","avatar":"https://developer.qcloudimg.com/http-save/10011/5219d8aaa3af9ce46e90ac5f2b200821.jpg"}},{"id":125263,"weight":1682576097,"type":8,"detail":{"abstract":"云工作室是一款由腾讯云推出的在线代码编辑器，它可以在浏览器中运行，所以不需要安装任何软件，仅需一台稳定的网络连接就可以使用。云工作室是一个适用于团队协作的开发工具，可以用于开发和部署云应用程序，提供了多种代码语言和框架支持。本操作手册将详细介绍云工作室的使用方法和功能。","articleId":2272077,"coverImageUrl":"https://ask.qcloudimg.com/article-cover-image/6026903/zfbewz609a.png","weight":1682576097,"avatar":"https://ask.qcloudimg.com/article-cover-image/6026903/zfbewz609a.png","author":{"id":6026903,"name":"疯狂的KK","label":"关注公众号《赵KK日常技术记录》回复【AI工具】获取AI大礼包个人博客https://zkkis.github.io/","avatar":"https://developer.qcloudimg.com/http-save/10011/82174896f193959f501f9b5ea9482529.jpg","company":"主站https://zkkis.github.io/","title":"主页有视频","isProfessionVerified":false,"isInternal":false},"authorBadgeInfo":{}},"createTime":1682576097,"objId":2272077,"entry":0,"readNum":27,"showReadNum":169,"abstract":"云工作室是一款由腾讯云推出的在线代码编辑器，它可以在浏览器中运行，所以不需要安装任何软件，仅需一台稳定的网络连接就可以使用。云工作室是一个适用于团队协作的开发工具，可以用于开发和部署云应用程序，提供了多种代码语言和框架支持。本操作手册将详细介绍云工作室的使用方法和功能。","articleId":2272077,"coverImageUrl":"https://ask.qcloudimg.com/article-cover-image/6026903/zfbewz609a.png","avatar":"https://ask.qcloudimg.com/article-cover-image/6026903/zfbewz609a.png","title":"【玩转 Cloud Studio】操作手册打开浏览器就能写代码","writeTime":1682324534,"tags":[{"tagId":11347,"tagName":"Cloud Studio（云端 IDE）"}],"picture":"https://ask.qcloudimg.com/article-cover-image/6026903/zfbewz609a.png","author":{"id":6026903,"name":"疯狂的KK","avatar":"https://developer.qcloudimg.com/http-save/10011/82174896f193959f501f9b5ea9482529.jpg"}},{"id":125261,"weight":1682576087,"type":8,"detail":{"abstract":"小学上课的时候，都传过小纸条吧？传纸条的时候每个拿到纸条的同学都会忍不住看一眼，毫无隐私可言。","articleId":2272438,"coverImageUrl":"https://developer.qcloudimg.com/http-save/yehe-10329227/fcc192ff824f72002401a108ed0a433d.png","weight":1682576087,"avatar":"https://developer.qcloudimg.com/http-save/yehe-10329227/fcc192ff824f72002401a108ed0a433d.png","author":{"id":10329227,"name":"汐语","label":"记录小白成长历程~","avatar":"https://developer.qcloudimg.com/http-save/10011/5c36b9626295f8eb6d0bea316b72be31.jpg","company":"","title":"","isProfessionVerified":false,"isInternal":false},"authorBadgeInfo":{}},"createTime":1682576087,"objId":2272438,"entry":0,"readNum":11,"showReadNum":63,"abstract":"小学上课的时候，都传过小纸条吧？传纸条的时候每个拿到纸条的同学都会忍不住看一眼，毫无隐私可言。","articleId":2272438,"coverImageUrl":"https://developer.qcloudimg.com/http-save/yehe-10329227/fcc192ff824f72002401a108ed0a433d.png","avatar":"https://developer.qcloudimg.com/http-save/yehe-10329227/fcc192ff824f72002401a108ed0a433d.png","title":"HTTPS 协议简述","writeTime":1682388704,"tags":[{"tagId":10813,"tagName":"https"},{"tagId":17267,"tagName":"服务器"},{"tagId":17317,"tagName":"加密"},{"tagId":17346,"tagName":"客户端"},{"tagId":17522,"tagName":"协议"}],"picture":"https://developer.qcloudimg.com/http-save/yehe-10329227/fcc192ff824f72002401a108ed0a433d.png","author":{"id":10329227,"name":"汐语","avatar":"https://developer.qcloudimg.com/http-save/10011/5c36b9626295f8eb6d0bea316b72be31.jpg"}},{"id":125259,"weight":1682558846,"type":8,"detail":{"abstract":"《通用人工智能的火花：GPT-4早期实验》是微软今年3月发表的一篇重要的GPT论文，引发了广泛的关注和讨论，论文原文是英文版，长达 154页，但中文版本还无人翻译，本文是整理了这篇论文的主要内容，做一个精华版，方便大家阅读。","articleId":2274134,"coverImageUrl":"https://ask.qcloudimg.com/article-cover-image/3021053/yspmpr936o.png","weight":1682558846,"avatar":"https://ask.qcloudimg.com/article-cover-image/3021053/yspmpr936o.png","author":{"id":3021053,"name":"成江东","label":"","avatar":"https://ask.qcloudimg.com/avatar/3021053/0tdzzhjri6.png","company":"财付通支付科技有限公司","title":"DBA经理","isProfessionVerified":true,"isInternal":false},"authorBadgeInfo":{}},"createTime":1682558846,"objId":2274134,"entry":0,"readNum":54,"showReadNum":99,"abstract":"《通用人工智能的火花：GPT-4早期实验》是微软今年3月发表的一篇重要的GPT论文，引发了广泛的关注和讨论，论文原文是英文版，长达 154页，但中文版本还无人翻译，本文是整理了这篇论文的主要内容，做一个精华版，方便大家阅读。","articleId":2274134,"coverImageUrl":"https://ask.qcloudimg.com/article-cover-image/3021053/yspmpr936o.png","avatar":"https://ask.qcloudimg.com/article-cover-image/3021053/yspmpr936o.png","title":"星星之火，可以燎原：微软154页GPT-4测试报告精华版","writeTime":1682503748,"tags":[{"tagId":13755,"tagName":"gpt"},{"tagId":10539,"tagName":"人工智能"}],"picture":"https://ask.qcloudimg.com/article-cover-image/3021053/yspmpr936o.png","author":{"id":3021053,"name":"成江东","avatar":"https://ask.qcloudimg.com/avatar/3021053/0tdzzhjri6.png"}},{"id":125257,"weight":1682558841,"type":8,"detail":{"articleId":2273362,"abstract":"?腾小云导读\n也许你有这样的体验：当你加入腾讯会议开会，老板正在发布重要任务时，你恰好要进电梯时 wifi 切换成了 cellular，画面开始「转菊花」，网络断开重连却需要好久，最终老板的指示你一个字都没听清楚\n\n。这个问题，要从会议的传输协议开始说起。会议团队遇到了网络切换的难题，是怎么解决的呢？欢迎继续往下阅读，看看腾讯会议团队的思路。\n?看目录，点收藏\n1 传统 TCP+TLS 套装有哪些弊端\n2 QUIC 带着一大堆 buff 来了：条件分析\n3 尝试吃掉 QUIC 这只大螃蟹：解决方案\n4 蟹钳","coverImageUrl":"","weight":1682558841,"avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","author":{"id":1422024,"name":"腾讯云开发者","label":"关注「腾讯云开发者」公众号，将获得：10元无门槛代金券、洞察腾讯核心技术、剖析业界实践案例。","avatar":"https://developer.qcloudimg.com/http-save/10011/5219d8aaa3af9ce46e90ac5f2b200821.jpg","company":"腾讯","title":"","isProfessionVerified":false,"isInternal":true},"authorBadgeInfo":{}},"createTime":1682558841,"objId":2273362,"entry":0,"readNum":15,"showReadNum":36,"articleId":2273362,"abstract":"?腾小云导读\n也许你有这样的体验：当你加入腾讯会议开会，老板正在发布重要任务时，你恰好要进电梯时 wifi 切换成了 cellular，画面开始「转菊花」，网络断开重连却需要好久，最终老板的指示你一个字都没听清楚\n\n。这个问题，要从会议的传输协议开始说起。会议团队遇到了网络切换的难题，是怎么解决的呢？欢迎继续往下阅读，看看腾讯会议团队的思路。\n?看目录，点收藏\n1 传统 TCP+TLS 套装有哪些弊端\n2 QUIC 带着一大堆 buff 来了：条件分析\n3 尝试吃掉 QUIC 这只大螃蟹：解决方案\n4 蟹钳","coverImageUrl":"","avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","title":"会中切换网络总掉线？腾讯会议用这种方案让你好好开会","writeTime":1682475018,"tags":[{"tagId":10945,"tagName":"腾讯会议"},{"tagId":17346,"tagName":"客户端"},{"tagId":17358,"tagName":"连接"},{"tagId":17484,"tagName":"网络"},{"tagId":17522,"tagName":"协议"}],"picture":"https://developer.qcloudimg.com/http-save/yehe-1422024/484c7d59ee3c347b462e6915012cb704.jpg","author":{"id":1422024,"name":"腾讯云开发者","avatar":"https://developer.qcloudimg.com/http-save/10011/5219d8aaa3af9ce46e90ac5f2b200821.jpg"}},{"id":125255,"weight":1682558771,"type":8,"detail":{"abstract":"Auto GPT是 OpenAI 的 Andrej Karpathy 都在大力宣传的一个开源项目，他认为 AutoGPT 是 prompt 工程的下一个前沿。","articleId":2272436,"coverImageUrl":"https://developer.qcloudimg.com/http-save/yehe-10329227/d02293e039a2232336a7179232b04b6f.png","weight":1682558771,"avatar":"https://developer.qcloudimg.com/http-save/yehe-10329227/d02293e039a2232336a7179232b04b6f.png","author":{"id":10329227,"name":"汐语","label":"记录小白成长历程~","avatar":"https://developer.qcloudimg.com/http-save/10011/5c36b9626295f8eb6d0bea316b72be31.jpg","company":"","title":"","isProfessionVerified":false,"isInternal":false},"authorBadgeInfo":{}},"createTime":1682558771,"objId":2272436,"entry":0,"readNum":128,"showReadNum":290,"abstract":"Auto GPT是 OpenAI 的 Andrej Karpathy 都在大力宣传的一个开源项目，他认为 AutoGPT 是 prompt 工程的下一个前沿。","articleId":2272436,"coverImageUrl":"https://developer.qcloudimg.com/http-save/yehe-10329227/d02293e039a2232336a7179232b04b6f.png","avatar":"https://developer.qcloudimg.com/http-save/yehe-10329227/d02293e039a2232336a7179232b04b6f.png","title":"Auto GPT","writeTime":1682388620,"tags":[{"tagId":10548,"tagName":"网站"},{"tagId":10667,"tagName":"开源"},{"tagId":12164,"tagName":"auto"},{"tagId":13755,"tagName":"gpt"},{"tagId":17459,"tagName":"搜索"}],"picture":"https://developer.qcloudimg.com/http-save/yehe-10329227/d02293e039a2232336a7179232b04b6f.png","author":{"id":10329227,"name":"汐语","avatar":"https://developer.qcloudimg.com/http-save/10011/5c36b9626295f8eb6d0bea316b72be31.jpg"}},{"id":125253,"weight":1682499067,"type":8,"detail":{"abstract":"本文目的是通过腾讯云 Cloud Studio实现在线自动搭建个人博客（基于node.js的Hexo模版）的功能。","articleId":2273620,"coverImageUrl":"","weight":1682499067,"avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","author":{"id":3237319,"name":"硬件开源小站","label":"电子硬件工程师","avatar":"https://developer.qcloudimg.com/http-save/10011/4a0ee53a1c807f4f97e1f588a37c7c5e.jpg","company":"北京申创世纪信息技术有限公司","title":"电子硬件工程师","isProfessionVerified":false,"isInternal":false},"authorBadgeInfo":{}},"createTime":1682499067,"objId":2273620,"entry":0,"readNum":126,"showReadNum":206,"abstract":"本文目的是通过腾讯云 Cloud Studio实现在线自动搭建个人博客（基于node.js的Hexo模版）的功能。","articleId":2273620,"coverImageUrl":"","avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","title":"【玩转 Cloud Studio】用Cloud Studio搭建自己的博客（hexo）","writeTime":1682487721,"tags":[{"tagId":17182,"tagName":"笔记"}],"picture":"","author":{"id":3237319,"name":"硬件开源小站","avatar":"https://developer.qcloudimg.com/http-save/10011/4a0ee53a1c807f4f97e1f588a37c7c5e.jpg"}},{"id":125251,"weight":1682491963,"type":8,"detail":{"abstract":"从1999年，公认的云计算先驱-Saleforce.com公司成立，到2006年，Amazon发布了名声大噪的EC2（Elastic Compute Cloud)，首次面向公众提供基础架构的云服务产品-IaaS，已经过去了7年。","articleId":2273637,"coverImageUrl":"https://ask.qcloudimg.com/article-cover-image/7506605/ytdt2l4h5e.png?q-sign-algorithm=sha1&q-ak=AKID2uZ1FGBdx1pNgjE3KK4YliPpzyjLZvug&q-sign-time=1682488980;1682496180&q-key-time=1682488980;1682496180&q-header-list=&q-url-param-list=&q-signature=72fdd90952f296bdca58ad386d45fa5c326db966","weight":1682491963,"avatar":"https://ask.qcloudimg.com/article-cover-image/7506605/ytdt2l4h5e.png?q-sign-algorithm=sha1&q-ak=AKID2uZ1FGBdx1pNgjE3KK4YliPpzyjLZvug&q-sign-time=1682488980;1682496180&q-key-time=1682488980;1682496180&q-header-list=&q-url-param-list=&q-signature=72fdd90952f296bdca58ad386d45fa5c326db966","author":{"id":7506605,"name":"abelbai","label":"腾讯云网络技术服务专家","avatar":"https://developer.qcloudimg.com/http-save/10011/9623a9a123bd1a5945b51363c7df562d.jpg","company":"腾讯","title":"网络技术服务专家","isProfessionVerified":false,"isInternal":true},"authorBadgeInfo":{}},"createTime":1682491963,"objId":2273637,"entry":0,"readNum":66,"showReadNum":108,"abstract":"从1999年，公认的云计算先驱-Saleforce.com公司成立，到2006年，Amazon发布了名声大噪的EC2（Elastic Compute Cloud)，首次面向公众提供基础架构的云服务产品-IaaS，已经过去了7年。","articleId":2273637,"coverImageUrl":"https://ask.qcloudimg.com/article-cover-image/7506605/ytdt2l4h5e.png?q-sign-algorithm=sha1&q-ak=AKID2uZ1FGBdx1pNgjE3KK4YliPpzyjLZvug&q-sign-time=1682488980;1682496180&q-key-time=1682488980;1682496180&q-header-list=&q-url-param-list=&q-signature=72fdd90952f296bdca58ad386d45fa5c326db966","avatar":"https://ask.qcloudimg.com/article-cover-image/7506605/ytdt2l4h5e.png?q-sign-algorithm=sha1&q-ak=AKID2uZ1FGBdx1pNgjE3KK4YliPpzyjLZvug&q-sign-time=1682488980;1682496180&q-key-time=1682488980;1682496180&q-header-list=&q-url-param-list=&q-signature=72fdd90952f296bdca58ad386d45fa5c326db966","title":"腾讯混合云网络设计白皮书","writeTime":1682488880,"tags":[{"tagId":17300,"tagName":"混合云"},{"tagId":10400,"tagName":"专线接入"},{"tagId":10638,"tagName":"云联网"},{"tagId":10551,"tagName":"混合云解决方案"},{"tagId":107,"tagName":"私有网络"}],"picture":"https://ask.qcloudimg.com/article-cover-image/7506605/ytdt2l4h5e.png?q-sign-algorithm=sha1&q-ak=AKID2uZ1FGBdx1pNgjE3KK4YliPpzyjLZvug&q-sign-time=1682503383;1682510583&q-key-time=1682503383;1682510583&q-header-list=&q-url-param-list=&q-signature=fbc6b798c7d63207fc0f5ce38d48ee95abf5a81e","author":{"id":7506605,"name":"abelbai","avatar":"https://developer.qcloudimg.com/http-save/10011/9623a9a123bd1a5945b51363c7df562d.jpg"}},{"id":125249,"weight":1682491954,"type":8,"detail":{"abstract":"ELK是一种流行的开源日志收集、存储、搜索和分析解决方案，它由Elasticsearch、Logstash和Kibana三个组件组成。在Docker环境中，使用ELK可以收集和分析容器日志，以便更好地了解应用程序的状态和运行情况。","articleId":2273472,"coverImageUrl":"","weight":1682491954,"avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","author":{"id":9201308,"name":"玖叁叁","label":"二十一世纪什么最贵，人才~","avatar":"https://developer.qcloudimg.com/http-save/10011/1fa27d617a01ec3d289c218d3e197e44.jpg","company":"腾云先锋","title":"腾云先锋（TDP）成员","isProfessionVerified":true,"isInternal":false},"authorBadgeInfo":{}},"createTime":1682491954,"objId":2273472,"entry":0,"readNum":59,"showReadNum":109,"abstract":"ELK是一种流行的开源日志收集、存储、搜索和分析解决方案，它由Elasticsearch、Logstash和Kibana三个组件组成。在Docker环境中，使用ELK可以收集和分析容器日志，以便更好地了解应用程序的状态和运行情况。","articleId":2273472,"coverImageUrl":"","avatar":"//cloudcache.tencent-cloud.com/open_proj/proj_qcloud_v2/gateway/q-and-a/css/img/avatar-default.png","title":"使用ELK采集和分析docker日志","writeTime":1682478487,"tags":[{"tagId":10318,"tagName":"docker"}],"picture":"","author":{"id":9201308,"name":"玖叁叁","avatar":"https://developer.qcloudimg.com/http-save/10011/1fa27d617a01ec3d289c218d3e197e44.jpg"}}],"relatedArticles":[{"id":1004692,"articleId":1004692,"title":"在 NodeJS 中玩转 Protocol Buffer","content":"","plain":"","brief":"","summary":"Protocol Buffers 是一种轻便高效的结构化数据存储格式，可以用于结构化数据序列化，很适合做数据存储或 RPC 数据交换格式。","abstract":"Protocol Buffers 是一种轻便高效的结构化数据存储格式，可以用于结构化数据序列化，很适合做数据存储或 RPC 数据交换格式。","posterSummary":"","description":"","picture":"","coverImageUrl":"","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{},"authorId":650358,"columnId":1039,"writeTime":0,"updateTime":0,"viewCount":4046,"likeCount":1,"commentCount":0,"favorCount":1,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":650358,"name":"腾讯IVWEB团队","label":"卓越web，全栈研发","avatar":"https://ask.qcloudimg.com/http-save/yehe-900000/749407afb30f24731c8249a0739a34ac.png","company":"","title":"","isProfessionVerified":false,"isInternal":true},"column":{"id":1039,"name":"腾讯IVWEB团队的专栏","desc":"","icon":"https://imgcache.qq.com/qcloud/developer/images/release/column-icons/19.png","background":"","status":2,"creatorId":650358,"memberCount":2,"articleCount":246,"followCount":128,"createdTime":1485917740}},{"id":1005849,"articleId":1005849,"title":"protobuffer 编解码原理","content":"","plain":"","brief":"","summary":"protobuf 在 RPC、数据存储、配置化等方面都有很广泛的应用，究其原因在于其时间和空间上的高效、易扩展等特性，本文从原理上来揭示其高效的原因。","abstract":"protobuf 在 RPC、数据存储、配置化等方面都有很广泛的应用，究其原因在于其时间和空间上的高效、易扩展等特性，本文从原理上来揭示其高效的原因。","posterSummary":"","description":"","picture":"https://ask.qcloudimg.com/http-save/yehe-900000/c395708b7734a057731ceaa143c69d2e.png","coverImageUrl":"https://ask.qcloudimg.com/http-save/yehe-900000/c395708b7734a057731ceaa143c69d2e.png","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{},"authorId":839405,"columnId":1052,"writeTime":0,"updateTime":0,"viewCount":1659,"likeCount":0,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":839405,"name":"serena","label":"猜猜 你猜你猜你猜猜猜","avatar":"https://ask.qcloudimg.com/http-save/yehe-839405/8f4fb9f1cce4405cc714ddd1be554c1d.jpg","company":"Tencent Cloud","title":"Product Manager","isProfessionVerified":false,"isInternal":false},"column":{"id":1052,"name":"社区的朋友们","desc":"","icon":"https://ask.qcloudimg.com/column-icons/1052/839405/eisad24s9g.png","background":"https://cloudcache.tencent-cloud.cn/qcloud/developer/images/release/column-bgs/3.svg","status":2,"creatorId":839405,"memberCount":4,"articleCount":159,"followCount":127,"createdTime":1478500145}},{"id":1010317,"articleId":1010317,"title":"tensorflow：AToolDeveloperGuideToTFModelFIles","content":"","plain":"","brief":"","summary":"Tensorflow Model Files\n最近闲来无聊，想深入理解一下tensorlfow，也不知从何下手，突然间发现了官方文档的Extend模块下还有这个...","abstract":"Tensorflow Model Files\n最近闲来无聊，想深入理解一下tensorlfow，也不知从何下手，突然间发现了官方文档的Extend模块下还有这个...","posterSummary":"Tensorflow Model Files\n最近闲来无聊，想深入理解一下tensorlfow，也不知从何下手，突然间发现了官方文档的Extend模块下还有这个一片文章 A Tool Developer's Guide to TensorFlow Model Files, 所以就打算边翻译，边学习了。水平有限，如发现错误，请不吝指出！\n翻译开始\n大多数用户不需要关心tensorflow在硬盘上存储...","description":"","picture":"","coverImageUrl":"","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"csdn","originalTime":""},"authorId":1125223,"columnId":1588,"writeTime":0,"updateTime":0,"viewCount":887,"likeCount":5,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":1125223,"name":"ke1th","label":"","avatar":"https://ask.qcloudimg.com/avatar/1125223/n9tfyvf0fy.png","company":"","title":"","isProfessionVerified":false,"isInternal":false},"column":{"id":1588,"name":"漫漫深度学习路","desc":"","icon":"https://imgcache.qq.com/qcloud/developer/images/release/column-icons/10.png","background":"","status":2,"creatorId":1125223,"memberCount":1,"articleCount":167,"followCount":54,"createdTime":1512960237}},{"id":1013588,"articleId":1013588,"title":"移动互联网IM之协议设计","content":"","plain":"","brief":"","summary":"\n 导语：如果想自己动手实现一个移动互联网IM app，要怎么做？第一个要解决的问题就是IM协议的设计。本文将讲述如何从0到1设计一个私有的tcp协议。\n \n虽...","abstract":"\n 导语：如果想自己动手实现一个移动互联网IM app，要怎么做？第一个要解决的问题就是IM协议的设计。本文将讲述如何从0到1设计一个私有的tcp协议。\n \n虽...","posterSummary":"\n 导语：如果想自己动手实现一个移动互联网IM app，要怎么做？第一个要解决的问题就是IM协议的设计。本文将讲述如何从0到1设计一个私有的tcp协议。\n \n虽然现在市面上已经存在各种各样的消息推送SDK如信鸽，但可能由于各种原因无法全面满足需求，还是想自己实现一个IM或推送功能。那么你需要解决哪些问题呢？首先面临的第一个问题就是如何实现IM协议？\n传输协议选择\n传输协议一般是指TCP和UDP协议...","description":"","picture":"https://ask.qcloudimg.com/http-save/yehe-1069763/3aumsd2o8p.png","coverImageUrl":"https://ask.qcloudimg.com/http-save/yehe-1069763/3aumsd2o8p.png","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"melonteam","originalTime":"2017-03-27"},"authorId":1069763,"columnId":1655,"writeTime":0,"updateTime":0,"viewCount":1603,"likeCount":8,"commentCount":1,"favorCount":1,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":1069763,"name":"MelonTeam","label":"腾讯手机QQ全端团队","avatar":"https://ask.qcloudimg.com/avatar/1069763/eh528wcp5z.jpg","company":"腾讯","title":"终端团队","isProfessionVerified":true,"isInternal":true},"column":{"id":1655,"name":"MelonTeam专栏","desc":"移动端+后端开发经验分享","icon":"https://ask.qcloudimg.com/column-icons/1655/1069763/27wpc31loo.jpg","background":"","status":2,"creatorId":1069763,"memberCount":1,"articleCount":107,"followCount":73,"createdTime":1512990770}},{"id":1015451,"articleId":1015451,"title":"在NodeJS中玩转Protocol Buffer","content":"","plain":"","brief":"","summary":"  本文作者：IMWeb link 原文出处：IMWeb社区 未经同意，禁止转载 \n \n 这篇文章的代码都是基于Protobuf.js 4.x的API写的，已经...","abstract":"  本文作者：IMWeb link 原文出处：IMWeb社区 未经同意，禁止转载 \n \n 这篇文章的代码都是基于Protobuf.js 4.x的API写的，已经...","posterSummary":"  本文作者：IMWeb link 原文出处：IMWeb社区 未经同意，禁止转载 \n \n 这篇文章的代码都是基于Protobuf.js 4.x的API写的，已经跟最新的Protobuf.js 6.x不兼容了，想学习最新的API可以参考bilibili大神的这篇文章：安利贴：如何使用protobuf\n \nProtocol Buffer入门教程\nProtocol Buffer是个什么鬼？\nProtoc...","description":"","picture":"https://ask.qcloudimg.com/http-save/yehe-1021320/axwiye6mcw.png","coverImageUrl":"https://ask.qcloudimg.com/http-save/yehe-1021320/axwiye6mcw.png","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"","originalTime":"2016-04-03 23:02"},"authorId":1021320,"columnId":1677,"writeTime":0,"updateTime":0,"viewCount":2613,"likeCount":9,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":1021320,"name":"IMWeb前端团队","label":"IMWEB团队正式成立是时间是2011年6月7日，团队创立之初是负责腾讯最核心的基础业务，QQ注册， QQ登录（ptlogin），QQ资料和关系链拓展等基础服务。 后转型进行应用开发，分别投入Q+，QQ圈子， QQ匿名聊，QQ群整体业务等。目前主要负责腾讯在线教育战略产品腾讯课堂，多人社交互动视频以及活动 组织类项目的研发工作。 IMWeb团队成员目前已分布全国各大互联网企业，或有些在创业公司担当","avatar":"https://ask.qcloudimg.com/avatar/1021320/vd3193otj0.png","company":"腾讯","title":"前端开发工程师","isProfessionVerified":true,"isInternal":true},"column":{"id":1677,"name":"IMWeb前端团队","desc":"IMWeb前端团队专栏","icon":"https://ask.qcloudimg.com/column-icons/1677/1021320/fedv6af1bn.png","background":"","status":2,"creatorId":1021320,"memberCount":1,"articleCount":1369,"followCount":211,"createdTime":1513155952}},{"id":1016504,"articleId":1016504,"title":"protobuf 转换python代码时发生 Expected \"required\", \"optional\", or \"repeated\".错误解决方法","content":"","plain":"","brief":"","summary":"        Google Protocol Buffers 简称 Protobuf，它提供了一种灵活、高效、自动序列化结构数据的机制，可以联想 XML，但是...","abstract":"        Google Protocol Buffers 简称 Protobuf，它提供了一种灵活、高效、自动序列化结构数据的机制，可以联想 XML，但是...","posterSummary":"        Google Protocol Buffers 简称 Protobuf，它提供了一种灵活、高效、自动序列化结构数据的机制，可以联想 XML，但是比 XML 更小、更快、更简单。仅需要自定义一次你所需的数据格式，然后用户就可以使用 Protobuf 编译器自动生成各种语言的源码，方便的读写用户自定义的格式化的数据。与语言无关，与平台无关，还可以在不破坏原数据格式的基础上，依据老的数据...","description":"","picture":"","coverImageUrl":"","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"csdn","originalTime":"2017年06月19日 09:14:21"},"authorId":1155928,"columnId":1681,"writeTime":0,"updateTime":0,"viewCount":1207,"likeCount":8,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":1155928,"name":"sparkexpert","label":"大数据与人工智能的爱好者，专注大数据架构、自然语言处理、知识图谱和计算机视觉方面技术跟踪学习","avatar":"https://ask.qcloudimg.com/avatar/male/HJQWnqaWruQ.png","company":"freedom","title":"research","isProfessionVerified":false,"isInternal":false},"column":{"id":1681,"name":"大数据智能实战","desc":"大数据与人工智能方向的论文复现、技术探索、工程实践的点滴记录和积累。","icon":"https://ask.qcloudimg.com/http-save/yehe-1155928/f3l52c9jx6.jpeg","background":"","status":2,"creatorId":1155928,"memberCount":1,"articleCount":256,"followCount":56,"createdTime":1513169837}},{"id":1025001,"articleId":1025001,"title":"WCF服务上应用protobuf","content":"","plain":"","brief":"","summary":"protobuf是google提供的一个开源序列化框架，类似于XML，JSON这样的数据表示语言，其最大的特点是基于二进制，因此比传统的XML表示高效短小得多。...","abstract":"protobuf是google提供的一个开源序列化框架，类似于XML，JSON这样的数据表示语言，其最大的特点是基于二进制，因此比传统的XML表示高效短小得多。...","posterSummary":"protobuf是google提供的一个开源序列化框架，类似于XML，JSON这样的数据表示语言，其最大的特点是基于二进制，因此比传统的XML表示高效短小得多。虽然是二进制数据格式，但并没有因此变得复杂，开发人员通过按照一定的语法定义结构化的消息格式，然后送给命令行工具，工具将自动生成相关的类，可以支持java、c++、python等语言环境。通过将这些类包含在项目中，可以很轻松的调用相关方法来完...","description":"","picture":"","coverImageUrl":"","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"cnblogs","originalTime":"2010-12-19 13:12"},"authorId":410847,"columnId":1223,"writeTime":0,"updateTime":0,"viewCount":381,"likeCount":6,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":410847,"name":"张善友","label":"腾讯云TVP，微软MVP","avatar":"https://ask.qcloudimg.com/http-save/yehe-410847/fb31b97a3af694f513d249eba5a3ecd3.png","company":"深圳市友浩达科技有限公司","title":"CTO","isProfessionVerified":true,"isInternal":false},"column":{"id":1223,"name":"张善友的专栏","desc":"","icon":"https://imgcache.qq.com/qcloud/developer/images/release/column-icons/8.png","background":"","status":2,"creatorId":410847,"memberCount":1,"articleCount":1495,"followCount":133,"createdTime":1494323818}},{"id":1025004,"articleId":1025004,"title":"Protocol Buffers的应用","content":"","plain":"","brief":"","summary":"1. Protocol Buffers的介绍\nProtocol buffers are Google’s language-neutral, platform-...","abstract":"1. Protocol Buffers的介绍\nProtocol buffers are Google’s language-neutral, platform-...","posterSummary":"1. Protocol Buffers的介绍\nProtocol buffers are Google’s language-neutral, platform-neutral, extensible mechanism for serializing structured data – think XML, but smaller, faster, and simpler. You define ...","description":"","picture":"","coverImageUrl":"","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"cnblogs","originalTime":"2013-02-11 23:56"},"authorId":410847,"columnId":1223,"writeTime":0,"updateTime":0,"viewCount":431,"likeCount":10,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":410847,"name":"张善友","label":"腾讯云TVP，微软MVP","avatar":"https://ask.qcloudimg.com/http-save/yehe-410847/fb31b97a3af694f513d249eba5a3ecd3.png","company":"深圳市友浩达科技有限公司","title":"CTO","isProfessionVerified":true,"isInternal":false},"column":{"id":1223,"name":"张善友的专栏","desc":"","icon":"https://imgcache.qq.com/qcloud/developer/images/release/column-icons/8.png","background":"","status":2,"creatorId":410847,"memberCount":1,"articleCount":1495,"followCount":133,"createdTime":1494323818}},{"id":1025821,"articleId":1025821,"title":"WCF RESTful服务的Google Protocol Buffers超媒体类型","content":"","plain":"","brief":"","summary":"Protocol Buffers 是在一个很理想的结构化数据的语言中立的序列化格式。你可以考虑一下XML或JSON，但更轻，更小的协议缓冲区。 这种格式的广应用...","abstract":"Protocol Buffers 是在一个很理想的结构化数据的语言中立的序列化格式。你可以考虑一下XML或JSON，但更轻，更小的协议缓冲区。 这种格式的广应用...","posterSummary":"Protocol Buffers 是在一个很理想的结构化数据的语言中立的序列化格式。你可以考虑一下XML或JSON，但更轻，更小的协议缓冲区。 这种格式的广应用于谷歌不同的系统之间交换数据。\n由于其结构化数据的最佳表现，protocol buffers 是一个代表RESTful服务处理的数据很好的选择。要遵循REST的原则， protocol buffers 应作为一个新的超媒体类型的代表。 在当...","description":"","picture":"https://ask.qcloudimg.com/http-save/yehe-410847/d65syetvt5.png","coverImageUrl":"https://ask.qcloudimg.com/http-save/yehe-410847/d65syetvt5.png","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"cnblogs","originalTime":"2012-01-22 11:52"},"authorId":410847,"columnId":1223,"writeTime":0,"updateTime":0,"viewCount":457,"likeCount":7,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":410847,"name":"张善友","label":"腾讯云TVP，微软MVP","avatar":"https://ask.qcloudimg.com/http-save/yehe-410847/fb31b97a3af694f513d249eba5a3ecd3.png","company":"深圳市友浩达科技有限公司","title":"CTO","isProfessionVerified":true,"isInternal":false},"column":{"id":1223,"name":"张善友的专栏","desc":"","icon":"https://imgcache.qq.com/qcloud/developer/images/release/column-icons/8.png","background":"","status":2,"creatorId":410847,"memberCount":1,"articleCount":1495,"followCount":133,"createdTime":1494323818}},{"id":1030036,"articleId":1030036,"title":"大型web系统数据缓存设计","content":"","plain":"","brief":"","summary":"1.   前言\n在高访问量的web系统中，缓存几乎是离不开的；但是一个适当、高效的缓存方案设计却并不容易；所以接下来将讨论一下应用系统缓存的设计方面应该注意哪些...","abstract":"1.   前言\n在高访问量的web系统中，缓存几乎是离不开的；但是一个适当、高效的缓存方案设计却并不容易；所以接下来将讨论一下应用系统缓存的设计方面应该注意哪些...","posterSummary":"1.   前言\n在高访问量的web系统中，缓存几乎是离不开的；但是一个适当、高效的缓存方案设计却并不容易；所以接下来将讨论一下应用系统缓存的设计方面应该注意哪些东西，包括缓存的选型、常见缓存系统的特点和数据指标、缓存对象结构设计和失效策略以及缓存对象的压缩等等，以期让有需求的同学尤其是初学者能够快速、系统的了解相关知识。\n2.   数据库的瓶颈\n2.1         数据量\n关系型数据库的数据量...","description":"","picture":"","coverImageUrl":"","sourceType":1,"sourceDetail":{},"channelType":0,"channelDetail":{"source":"wechat","originalTime":"2015-12-03","author":"腾讯大数据","nickName":"腾讯大数据","userName":"gh_bf1029c8db5b","alias":"tencentbigdata","authorName":"腾讯大数据"},"authorId":1009891,"columnId":1408,"writeTime":0,"updateTime":0,"viewCount":1172,"likeCount":6,"commentCount":0,"favorCount":0,"weight":0,"status":2,"draftId":0,"tagIds":[],"tags":[],"isCommentEnable":true,"highQuality":false,"skipAds":false,"showAds":false,"focusRead":false,"publishTime":null,"editTime":null,"isCloseTextLink":false,"author":{"id":1009891,"name":"腾讯大数据","label":"为开发者提供专业、易用、可信赖的大数据产品","avatar":"https://ask.qcloudimg.com/raw/yehe-133f028/kcz4ys866s.png","company":"","title":"","isProfessionVerified":false,"isInternal":true},"column":{"id":1408,"name":"腾讯大数据的专栏","desc":"","icon":"https://imgcache.qq.com/qcloud/developer/images/release/column-icons/12.png","background":"","status":2,"creatorId":1009891,"memberCount":2,"articleCount":314,"followCount":124,"createdTime":1502848372}}],"anchorToCommentsArea":false,"isFromOriginalSharing":false,"isCampusAmabassdor":false,"relatedInventoryData":{"list":[],"total":0},"myInventoryData":{"fetchStatus":"loaded","pageNumber":2,"pageSize":20,"done":false},"hasColumnArticleRecommendRight":false,"hasColumnArticleDeletedRight":false,"isFollowing":false,"moduleStoredKeyMap":{"mod-article-handpicked-special-topic":"COLUMN_article_handpicked_special_topic","mod-article-handpicked-activity":"COLUMN_article_handpicked_activity"},"moduleDataMap":{"mod-article-handpicked-special-topic":[{"id":"pRQeBt-T8","url":"https://cloud.tencent.com/developer/special/TencentCloudNative","title":"腾讯云原生专题","subTitle":"云原生技术干货，业务实践落地。","coverImageUrl":"https://ask.qcloudimg.com/raw/yehe-1b54603d7b98/k8pfdhqi7p.jpg"}],"mod-article-handpicked-activity":[{"id":"_2oAP_Fw6","url":"https://cloud.tencent.com/developer/article/2269353","title":"有奖征文丨玩转Cloud Studio","subTitle":"参与活动，赢取限量周边礼品","btnText":"立即参加","coverImageUrl":"https://ask.qcloudimg.com/raw/yehe-1b54603d7b98/l7paq6x0qv.jpg"},{"id":"es8bcjiiD","url":"https://cloud.tencent.com/developer/support-plan-invitation","title":"邀请好友加入自媒体分享计划","subTitle":"邀请好友，同享奖励 30 / 100 / 180 元云服务器代金券","btnText":"立即邀请","coverImageUrl":"https://ask.qcloudimg.com/raw/yehe-1b54603d7b98/8rzvh0nm9n.jpg"}]},"developerSpreadBanner":{"id":169,"imageUrl":"https://ask.qcloudimg.com/raw/yehe-b3360f6a89f75/5ucevjlojf.png","mImgUrl":"https://ask.qcloudimg.com/raw/yehe-1933968238b1680/2t263ay6b3.png","title":"对象存储COS专场特惠，新用户专享存储包低至1元","desc":"一站式解决数据备份、共享、大数据处理、线上数据托管的云端存储服务","buttonText":"立即抢购","spreadUrl":"https://cloud.tencent.com/act/pro/cos?from=20165&from_column=20165"},"env":"production","documentBaseTitle":"腾讯云开发者社区-腾讯云","cdnDomain":"cloudcache.tencent-cloud.cn","cssDomain":"cloudcache.tencent-cloud.cn","qcloudDomain":"cloud.tencent.com","consoleDomain":"console.cloud.tencent.com","session":{"isLogined":false,"isQcloudUser":false,"isOwner":false,"nickname":"","accountInfoCompleted":false,"phoneCompleted":false,"profile":{},"contactPhoneCompleted":false,"userInfo":{}},"fromMiniProgram":false,"route":{"url":"/developer/article/1520442","path":"/developer/article/1520442","pathname":"/developer/article/1520442","search":null,"query":{},"segments":["developer","article","1520442"]}});
</script><script>
					if (!Element.prototype.matches)
	Element.prototype.matches = Element.prototype.msMatchesSelector ||
															Element.prototype.webkitMatchesSelector;
	if (!Element.prototype.closest)
		Element.prototype.closest = function(s) {
				var el = this;
				if (!document.documentElement.contains(el)) return null;
				do {
						if (el.matches(s)) return el;
						el = el.parentElement;
				} while (el !== null);
				return null;
		};
					 window.addEventListener('mouseover', function(evt) {
    const target = evt.target;
    if (!target) {
      return;
    }
    const aEle = target.closest('a');
    if (!aEle) {
      return;
    }
    let href = aEle.getAttribute('href');
    if (!href) {
      return;
    }
    href = href.replace(/cloud.tencent.com.cn|cloud.tencent.com|cloud.tencent.cn/g, 'cloud.tencent.com');
    aEle.setAttribute('href', href);
  }, true);
  
					</script></body></html>